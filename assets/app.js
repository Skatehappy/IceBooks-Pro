var ho=Object.create;var Wt=Object.defineProperty;var _o=Object.getOwnPropertyDescriptor;var So=Object.getOwnPropertyNames;var Co=Object.getPrototypeOf,ko=Object.prototype.hasOwnProperty;var Ot=(i,a)=>()=>(a||i((a={exports:{}}).exports,a),a.exports);var xo=(i,a,v,h)=>{if(a&&typeof a=="object"||typeof a=="function")for(let E of So(a))!ko.call(i,E)&&E!==v&&Wt(i,E,{get:()=>a[E],enumerable:!(h=_o(a,E))||h.enumerable});return i};var wo=(i,a,v)=>(v=i!=null?ho(Co(i)):{},xo(a||!i||!i.__esModule?Wt(v,"default",{value:i,enumerable:!0}):v,i));var Qt=Ot(x=>{"use strict";var at=Symbol.for("react.transitional.element"),Eo=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),Do=Symbol.for("react.strict_mode"),Io=Symbol.for("react.profiler"),Ao=Symbol.for("react.consumer"),Po=Symbol.for("react.context"),Bo=Symbol.for("react.forward_ref"),Lo=Symbol.for("react.suspense"),No=Symbol.for("react.memo"),qt=Symbol.for("react.lazy"),zo=Symbol.for("react.activity"),Ut=Symbol.iterator;function $o(i){return i===null||typeof i!="object"?null:(i=Ut&&i[Ut]||i["@@iterator"],typeof i=="function"?i:null)}var Yt={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jt=Object.assign,Kt={};function Te(i,a,v){this.props=i,this.context=a,this.refs=Kt,this.updater=v||Yt}Te.prototype.isReactComponent={};Te.prototype.setState=function(i,a){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,a,"setState")};Te.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function Xt(){}Xt.prototype=Te.prototype;function dt(i,a,v){this.props=i,this.context=a,this.refs=Kt,this.updater=v||Yt}var ut=dt.prototype=new Xt;ut.constructor=dt;Jt(ut,Te.prototype);ut.isPureReactComponent=!0;var Ht=Array.isArray;function rt(){}var N={H:null,A:null,T:null,S:null},Zt=Object.prototype.hasOwnProperty;function pt(i,a,v){var h=v.ref;return{$$typeof:at,type:i,key:a,ref:h!==void 0?h:null,props:v}}function Mo(i,a){return pt(i.type,a,i.props)}function yt(i){return typeof i=="object"&&i!==null&&i.$$typeof===at}function Fo(i){var a={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(v){return a[v]})}var Vt=/\/+/g;function st(i,a){return typeof i=="object"&&i!==null&&i.key!=null?Fo(""+i.key):a.toString(36)}function Go(i){switch(i.status){case"fulfilled":return i.value;case"rejected":throw i.reason;default:switch(typeof i.status=="string"?i.then(rt,rt):(i.status="pending",i.then(function(a){i.status==="pending"&&(i.status="fulfilled",i.value=a)},function(a){i.status==="pending"&&(i.status="rejected",i.reason=a)})),i.status){case"fulfilled":return i.value;case"rejected":throw i.reason}}throw i}function Ee(i,a,v,h,E){var T=typeof i;(T==="undefined"||T==="boolean")&&(i=null);var I=!1;if(i===null)I=!0;else switch(T){case"bigint":case"string":case"number":I=!0;break;case"object":switch(i.$$typeof){case at:case Eo:I=!0;break;case qt:return I=i._init,Ee(I(i._payload),a,v,h,E)}}if(I)return E=E(i),I=h===""?"."+st(i,0):h,Ht(E)?(v="",I!=null&&(v=I.replace(Vt,"$&/")+"/"),Ee(E,a,v,"",function($e){return $e})):E!=null&&(yt(E)&&(E=Mo(E,v+(E.key==null||i&&i.key===E.key?"":(""+E.key).replace(Vt,"$&/")+"/")+I)),a.push(E)),1;I=0;var X=h===""?".":h+":";if(Ht(i))for(var U=0;U<i.length;U++)h=i[U],T=X+st(h,U),I+=Ee(h,a,v,T,E);else if(U=$o(i),typeof U=="function")for(i=U.call(i),U=0;!(h=i.next()).done;)h=h.value,T=X+st(h,U++),I+=Ee(h,a,v,T,E);else if(T==="object"){if(typeof i.then=="function")return Ee(Go(i),a,v,h,E);throw a=String(i),Error("Objects are not valid as a React child (found: "+(a==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":a)+"). If you meant to render a collection of children, use an array instead.")}return I}function Ye(i,a,v){if(i==null)return i;var h=[],E=0;return Ee(i,h,"","",function(T){return a.call(v,T,E++)}),h}function Wo(i){if(i._status===-1){var a=i._result;a=a(),a.then(function(v){(i._status===0||i._status===-1)&&(i._status=1,i._result=v)},function(v){(i._status===0||i._status===-1)&&(i._status=2,i._result=v)}),i._status===-1&&(i._status=0,i._result=a)}if(i._status===1)return i._result.default;throw i._result}var jt=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Oo={map:Ye,forEach:function(i,a,v){Ye(i,function(){a.apply(this,arguments)},v)},count:function(i){var a=0;return Ye(i,function(){a++}),a},toArray:function(i){return Ye(i,function(a){return a})||[]},only:function(i){if(!yt(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};x.Activity=zo;x.Children=Oo;x.Component=Te;x.Fragment=To;x.Profiler=Io;x.PureComponent=dt;x.StrictMode=Do;x.Suspense=Lo;x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N;x.__COMPILER_RUNTIME={__proto__:null,c:function(i){return N.H.useMemoCache(i)}};x.cache=function(i){return function(){return i.apply(null,arguments)}};x.cacheSignal=function(){return null};x.cloneElement=function(i,a,v){if(i==null)throw Error("The argument must be a React element, but you passed "+i+".");var h=Jt({},i.props),E=i.key;if(a!=null)for(T in a.key!==void 0&&(E=""+a.key),a)!Zt.call(a,T)||T==="key"||T==="__self"||T==="__source"||T==="ref"&&a.ref===void 0||(h[T]=a[T]);var T=arguments.length-2;if(T===1)h.children=v;else if(1<T){for(var I=Array(T),X=0;X<T;X++)I[X]=arguments[X+2];h.children=I}return pt(i.type,E,h)};x.createContext=function(i){return i={$$typeof:Po,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null},i.Provider=i,i.Consumer={$$typeof:Ao,_context:i},i};x.createElement=function(i,a,v){var h,E={},T=null;if(a!=null)for(h in a.key!==void 0&&(T=""+a.key),a)Zt.call(a,h)&&h!=="key"&&h!=="__self"&&h!=="__source"&&(E[h]=a[h]);var I=arguments.length-2;if(I===1)E.children=v;else if(1<I){for(var X=Array(I),U=0;U<I;U++)X[U]=arguments[U+2];E.children=X}if(i&&i.defaultProps)for(h in I=i.defaultProps,I)E[h]===void 0&&(E[h]=I[h]);return pt(i,T,E)};x.createRef=function(){return{current:null}};x.forwardRef=function(i){return{$$typeof:Bo,render:i}};x.isValidElement=yt;x.lazy=function(i){return{$$typeof:qt,_payload:{_status:-1,_result:i},_init:Wo}};x.memo=function(i,a){return{$$typeof:No,type:i,compare:a===void 0?null:a}};x.startTransition=function(i){var a=N.T,v={};N.T=v;try{var h=i(),E=N.S;E!==null&&E(v,h),typeof h=="object"&&h!==null&&typeof h.then=="function"&&h.then(rt,jt)}catch(T){jt(T)}finally{a!==null&&v.types!==null&&(a.types=v.types),N.T=a}};x.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()};x.use=function(i){return N.H.use(i)};x.useActionState=function(i,a,v){return N.H.useActionState(i,a,v)};x.useCallback=function(i,a){return N.H.useCallback(i,a)};x.useContext=function(i){return N.H.useContext(i)};x.useDebugValue=function(){};x.useDeferredValue=function(i,a){return N.H.useDeferredValue(i,a)};x.useEffect=function(i,a){return N.H.useEffect(i,a)};x.useEffectEvent=function(i){return N.H.useEffectEvent(i)};x.useId=function(){return N.H.useId()};x.useImperativeHandle=function(i,a,v){return N.H.useImperativeHandle(i,a,v)};x.useInsertionEffect=function(i,a){return N.H.useInsertionEffect(i,a)};x.useLayoutEffect=function(i,a){return N.H.useLayoutEffect(i,a)};x.useMemo=function(i,a){return N.H.useMemo(i,a)};x.useOptimistic=function(i,a){return N.H.useOptimistic(i,a)};x.useReducer=function(i,a,v){return N.H.useReducer(i,a,v)};x.useRef=function(i){return N.H.useRef(i)};x.useState=function(i){return N.H.useState(i)};x.useSyncExternalStore=function(i,a,v){return N.H.useSyncExternalStore(i,a,v)};x.useTransition=function(){return N.H.useTransition()};x.version="19.2.3"});var en=Ot((mi,Rt)=>{"use strict";Rt.exports=Qt()});var e=wo(en()),{createClient:Uo}=window.supabase||{createClient:()=>({auth:{getSession:()=>Promise.resolve({data:{session:null}}),onAuthStateChange:()=>({data:{subscription:{unsubscribe:()=>{}}}})},from:()=>({select:()=>({order:()=>Promise.resolve({data:[]}),eq:()=>({single:()=>Promise.resolve({data:null,error:null})}),single:()=>Promise.resolve({data:null})})})})},on=window.SUPABASE_URL||import.meta.env.VITE_SUPABASE_URL||"",Ho=window.SUPABASE_ANON_KEY||import.meta.env.VITE_SUPABASE_ANON_KEY||"",g=Uo(on,Ho),Je=.7,mt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],tn=24,Ke=[{id:"private",name:"Private",icon:"\u{1F464}",color:"#3b82f6",max:1,rate:75},{id:"shared",name:"Shared",icon:"\u{1F465}",color:"#8b5cf6",max:2,rate:50},{id:"group",name:"Group",icon:"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}",color:"#10b981",max:8,rate:35}],vt=[{id:"competition",name:"Competition",icon:"\u{1F3C6}",color:"#f59e0b"},{id:"show",name:"Ice Show",icon:"\u2B50",color:"#ec4899"},{id:"testing",name:"Testing",icon:"\u{1F4CB}",color:"#14b8a6"},{id:"personal",name:"Personal",icon:"\u{1F4C5}",color:"#6366f1"},{id:"blocked",name:"Blocked",icon:"\u{1F6AB}",color:"#ef4444"}],Vo=["Ice Time","Music/Choreography","Costumes","Equipment","Travel","Training/Seminars","Coaching Fees","Membership Dues","Insurance","Other"],jo=["Cash","Check","Venmo","PayPal","Zelle","Credit Card","Bank Transfer"],qo=["Tots","Pre-Alpha","Alpha","Beta","Gamma","Delta","Freestyle 1","Freestyle 2","Freestyle 3","Freestyle 4","Freestyle 5","Freestyle 6","Freestyle 7","Freestyle 8","Freestyle 9","Freestyle 10","Open Freestyle Bronze","Open Freestyle Silver","Open Freestyle Gold","Open Freestyle Platinum"],Yo=Array.from({length:10},(i,a)=>`Figures ${a+1}`),Jo=Array.from({length:10},(i,a)=>`Couples ${a+1}`),Ko=Array.from({length:10},(i,a)=>`Pairs ${a+1}`),Xo=Array.from({length:10},(i,a)=>`Ice Dance ${a+1}`),nn=["Dutch Waltz","Canasta Tango","Rhythm Blues","Swing Dance","Cha Cha","Fiesta Tango","Hickory Hoedown","Willow Waltz","Ten-Fox","Fourteenstep","European Waltz","Foxtrot","American Waltz","Tango","Rocker Foxtrot","Kilian","Blues","Paso Doble","Starlight Waltz","Viennese Waltz","Westminster Waltz","Quickstep","Argentine Tango","Austrian Waltz","Cha Cha Congelado","Finnstep","Golden Waltz","Midnight Blues","Ravensburger Waltz","Rhumba","Silver Samba","Tango Romantica","Yankee Polka"],Zo=Array.from({length:10},(i,a)=>`Free Dance Partnered ${a+1}`),Qo=["Open Solo Free Dance Bronze","Open Solo Free Dance Silver","Open Solo Free Dance Gold","Open Solo Free Dance Platinum","Open Solo Free Dance Diamond"],Ro=Array.from({length:4},(i,a)=>`Synchro ${a+1}`),ei=Array.from({length:10},(i,a)=>`Special Skater ${a+1}`),ti=["Pre-Preliminary","Preliminary","Pre-Juvenile","Juvenile","Intermediate","Novice","Junior","Senior"],ni=["Pre-Preliminary","Preliminary","Pre-Juvenile","Juvenile","Intermediate","Novice","Junior","Senior"];var oi=["Juvenile/Bronze","Intermediate/Pre-Silver","Novice/Silver","Junior/Pre-Gold","Senior/Gold"],ii=["Preliminary","Juvenile","Intermediate","Novice","Junior","Senior"];function li(){let[i,a]=(0,e.useState)(null),[v,h]=(0,e.useState)(null),[E,T]=(0,e.useState)(!0),[I,X]=(0,e.useState)("signin"),[U,$e]=(0,e.useState)(""),[Xe,gt]=(0,e.useState)(""),[ft,ct]=(0,e.useState)(""),[bt,De]=(0,e.useState)(""),[Z,Ze]=(0,e.useState)("calendar"),[ht,_t]=(0,e.useState)(""),[me,ln]=(0,e.useState)(window.innerWidth<768),[Q,sn]=(0,e.useState)([]),[Me,rn]=(0,e.useState)([]),[oe,St]=(0,e.useState)([]),[G,Ct]=(0,e.useState)([]),[V,kt]=(0,e.useState)([]),[ie,an]=(0,e.useState)([]),[Qe,dn]=(0,e.useState)([]),[Fe,un]=(0,e.useState)([]),[xe,pn]=(0,e.useState)([]),[si,yn]=(0,e.useState)([]),[ae,Ge]=(0,e.useState)(new Date),[J,Re]=(0,e.useState)(me?"day":"week"),[R,We]=(0,e.useState)(me?new Date:null),[Ie,mn]=(0,e.useState)([]),[xt,vn]=(0,e.useState)(!1),[Oe,wt]=(0,e.useState)([]),[gn,et]=(0,e.useState)(!1),[le,_e]=(0,e.useState)({name:"",icon:"\u{1F4DA}",color:"#3b82f6",max:1,rate:50}),[se,L]=(0,e.useState)(null),[D,K]=(0,e.useState)(null),[W,de]=(0,e.useState)({date:"",start_time:"09:00",end_time:"09:30",lesson_type:"private",venue_id:"",max_students:1,is_published:!1,notes:"",rate:75}),[j,ve]=(0,e.useState)({name:"",event_type:"competition",start_date:"",end_date:"",venue_id:"",notes:"",is_registrable:!1}),[A,q]=(0,e.useState)({name:"",email:"",phone:"",address:"",city:"",state:"",zip:"",parent2_name:"",parent2_email:"",parent2_phone:"",notes:"",child_name:"",child_email:"",child_birthdate:""}),[C,z]=(0,e.useState)({client_id:"",name:"",email:"",birthdate:"",isi_freestyle:"",isi_figures:"",isi_couples:"",isi_pairs:"",isi_icedance:"",isi_international_dance:"",isi_freedance_partnered:"",isi_solo_freedance:"",isi_synchro:"",isi_special_skater:"",isi_number:"",usfsa_skating_skills:"",usfsa_singles:"",usfsa_pattern_dance:"",usfsa_free_dance:"",usfsa_pairs:"",usfsa_number:"",notes:""}),[k,ue]=(0,e.useState)({client_id:"",lessons:[],lateCancellations:[],amount:0,tax_rate:0,notes:"",due_date:"",payment_cash:!1,payment_check:!1,payment_venmo:"",payment_paypal:"",payment_zelle:"",payment_cashapp:""}),[ee,ge]=(0,e.useState)({date:"",category:"Ice Time",description:"",amount:"",vendor:"",payment_method:"Credit Card"}),[w,pe]=(0,e.useState)({date:"",description:"",miles:"",rate:Je,odometer_start:"",odometer_end:"",entry_type:"manual"}),[$,fe]=(0,e.useState)({cash:!1,check:!1,venmo:"",paypal:"",zelle:"",cashapp:""}),[Y,Se]=(0,e.useState)({expense_categories:Vo,mileage_rate:Je,vehicle_expense_method:"standard"}),[Ue,Et]=(0,e.useState)("pl"),[we,Tt]=(0,e.useState)({start:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[Ce,fn]=(0,e.useState)(null),[ce,tt]=(0,e.useState)([]),[Ae,Dt]=(0,e.useState)(1),[te,cn]=(0,e.useState)(null),[ke,It]=(0,e.useState)(""),[re,He]=(0,e.useState)(null),F=v?.role==="coach";(0,e.useEffect)(()=>{let o=()=>ln(window.innerWidth<768);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),(0,e.useEffect)(()=>{g.auth.getSession().then(({data:{session:n}})=>{a(n),n?At(n.user.id):T(!1)});let{data:{subscription:o}}=g.auth.onAuthStateChange((n,l)=>{a(l),l?At(l.user.id):(h(null),T(!1))});return()=>o.unsubscribe()},[]);let At=async o=>{try{let{data:n,error:l}=await g.from("profiles").select("*").eq("user_id",o).single();if(l)throw l;h(n),P(n)}catch(n){console.error("Profile load error:",n),T(!1)}},bn=async o=>{o.preventDefault(),De("");try{let{error:n}=await g.auth.signInWithPassword({email:U,password:Xe});if(n)throw n}catch(n){De(n.message)}},hn=async o=>{o.preventDefault(),De("");try{let{error:n}=await g.auth.signUp({email:U,password:Xe,options:{data:{name:ft}}});if(n)throw n;y("Check your email to confirm your account!"),X("signin")}catch(n){De(n.message)}},_n=async()=>{await g.auth.signOut(),h(null),$e(""),gt(""),ct(""),De(""),Ze("calendar")},P=async o=>{try{T(!0);let n=[g.from("lessons").select("*").order("date"),g.from("events").select("*").order("start_date"),g.from("venues").select("*").order("name"),g.from("rates").select("*")];if(o.role==="coach")n.push(g.from("clients").select("*").order("name"),g.from("students").select("*").order("name"),g.from("bookings").select("*"),g.from("invoices").select("*").order("created_at",{ascending:!1}),g.from("expenses").select("*").order("date",{ascending:!1}),g.from("mileage").select("*").order("date",{ascending:!1}));else{let{data:r}=await g.from("clients").select("*").eq("profile_id",o.id),d=(r||[]).map(s=>s.id),m=[];if(d.length>0){let{data:s}=await g.from("students").select("*").in("client_id",d);m=s||[]}n.push(Promise.resolve({data:r}),Promise.resolve({data:m}),g.from("bookings").select("*"))}let l=await Promise.all(n);if(sn(l[0].data||[]),rn(l[1].data||[]),an(l[2].data||[]),yn(l[3].data||[]),o.role==="coach"){St(l[4].data||[]),Ct(l[5].data||[]),kt(l[6].data||[]),dn(l[7].data||[]),un(l[8].data||[]),pn(l[9].data||[]);let{data:r,error:d}=await g.from("settings").select("*").single();if(d&&console.log("Settings not found, using defaults:",d),r){if(fe({cash:r.payment_cash||!1,check:r.payment_check||!1,venmo:r.payment_venmo||"",paypal:r.payment_paypal||"",zelle:r.payment_zelle||"",cashapp:r.payment_cashapp||""}),r.expense_categories)try{let s=typeof r.expense_categories=="string"?JSON.parse(r.expense_categories):r.expense_categories;Se(u=>({...u,expense_categories:s}))}catch(s){console.error("Error parsing expense categories:",s)}if(r.mileage_rate!==void 0&&r.mileage_rate!==null&&Se(s=>({...s,mileage_rate:r.mileage_rate})),r.vehicle_expense_method&&Se(s=>({...s,vehicle_expense_method:r.vehicle_expense_method})),r.custom_lesson_types)try{wt(JSON.parse(r.custom_lesson_types))}catch(s){console.error("Error parsing custom lesson types:",s)}}let{data:m}=await g.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);mn(m||[])}else St(l[4].data||[]),Ct(l[5].data||[]),kt(l[6].data||[])}catch(n){console.error("Load error:",n),y("Error loading data")}finally{T(!1)}},y=o=>{_t(o),setTimeout(()=>_t(""),3e3)},ye=o=>new Date(o).toLocaleDateString(),M=o=>{let n=o instanceof Date?o:new Date(o),l=n.getFullYear(),r=String(n.getMonth()+1).padStart(2,"0"),d=String(n.getDate()).padStart(2,"0");return`${l}-${r}-${d}`},Pe=o=>{if(!o)return"";let[n,l]=o.split(":"),r=parseInt(n),d=r>=12?"PM":"AM";return`${r%12||12}:${l} ${d}`},H=o=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(o||0),Ve=o=>{let n=new Date(o),l=n.getDay(),r=new Date(n);return r.setDate(n.getDate()-l),Array.from({length:7},(d,m)=>{let s=new Date(r);return s.setDate(r.getDate()+m),s})},Pt=o=>{let n=o.getFullYear(),l=o.getMonth(),r=new Date(n,l,1),d=new Date(n,l+1,0),m=[];for(let s=r.getDay()-1;s>=0;s--)m.push({date:new Date(n,l,-s),outside:!0});for(let s=1;s<=d.getDate();s++)m.push({date:new Date(n,l,s),outside:!1});for(;m.length<42;)m.push({date:new Date(n,l+1,m.length-d.getDate()-r.getDay()+1),outside:!0});return m},ne=o=>{let n=Oe.find(l=>l.id===o);return n||Ke.find(l=>l.id===o)||Ke[0]},Be=o=>vt.find(n=>n.id===o)||vt[0],ri=()=>[...Ke,...Oe],Bt=async(o,n,l=null,r=null,d=null)=>{try{let{error:m}=await g.from("notifications").insert({type:o,message:n,lesson_id:l,event_id:r,student_id:d,read:!1});m||P(v)}catch(m){console.error("Notification error:",m)}},Sn=async o=>{await g.from("notifications").update({read:!0}).eq("id",o),P(v)},Cn=async()=>{await g.from("notifications").update({read:!0}).eq("read",!1),P(v)},kn=async o=>{try{let{error:n}=await g.from("settings").update({custom_lesson_types:JSON.stringify(o)}).eq("id",1);if(n)throw n;wt(o),y("Custom lesson types saved")}catch(n){y("Error saving: "+n.message)}},xn=async()=>{if(!le.name.trim()){y("Please enter a name");return}let o={...le,id:"custom_"+Date.now()},n=[...Oe,o];await kn(n),_e({name:"",icon:"\u{1F4DA}",color:"#3b82f6",max:1,rate:50}),et(!1)},wn=()=>{if(!R)return;let o=R.toLocaleDateString(),n=Q.filter(d=>d.date===R.toISOString().split("T")[0]).sort((d,m)=>d.start_time.localeCompare(m.start_time)),l=`<!DOCTYPE html><html><head><title>Schedule - ${o}</title>
    <style>
      body { font-family: Arial, sans-serif; padding: 20px; }
      h1 { font-size: 20px; margin-bottom: 20px; }
      table { width: 100%; border-collapse: collapse; margin-top: 10px; }
      th, td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
      th { background: #f3f4f6; font-weight: 600; }
      .no-lessons { color: #6b7280; padding: 20px; }
    </style></head><body>
    <h1>IceBooks Pro - Schedule for ${o}</h1>
    <table><thead><tr><th>Time</th><th>Lesson</th><th>Venue</th><th>Students</th><th>Parent Contact</th><th>Level</th></tr></thead><tbody>`;n.length===0?l+='<tr><td colspan="6" class="no-lessons">No lessons scheduled</td></tr>':n.forEach(d=>{let m=ne(d.lesson_type),s=ie.find(b=>b.id===d.venue_id),u=V.filter(b=>b.lesson_id===d.id&&b.status!=="cancelled");u.length===0?l+=`<tr><td>${d.start_time} - ${d.end_time}</td><td>${m.icon} ${m.name}</td><td>${s?.name||""}</td><td colspan="3" style="color: #9ca3af;">No bookings</td></tr>`:u.forEach((b,p)=>{let S=G.find(f=>f.id===b.student_id),c=oe.find(f=>f.id===S?.client_id);p===0?l+=`<tr><td rowspan="${u.length}">${d.start_time} - ${d.end_time}</td><td rowspan="${u.length}">${m.icon} ${m.name}</td><td rowspan="${u.length}">${s?.name||""}</td>`:l+="<tr>",l+=`<td>${S?.name||"Unknown"}</td><td>${c?.name||""}<br/>${c?.phone||""}</td><td>${S?.isi_level||S?.usfsa_level||""}</td></tr>`})}),l+="</tbody></table></body></html>";let r=window.open("","","width=800,height=600");r.document.write(l),r.document.close(),r.focus(),setTimeout(()=>r.print(),250)},En=()=>{let o=[];return Q.forEach(n=>{let l=ne(n.lesson_type),r=ie.find(p=>p.id===n.venue_id),m=V.filter(p=>p.lesson_id===n.id&&p.status!=="cancelled").map(p=>G.find(S=>S.id===p.student_id)?.name).filter(Boolean).join(", "),s=n.date.replace(/-/g,""),u=n.start_time.replace(/:/g,"")+"00",b=n.end_time.replace(/:/g,"")+"00";o.push(["BEGIN:VEVENT",`UID:icebooks-lesson-${n.id}@icebooks`,`DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").split(".")[0]}Z`,`DTSTART:${s}T${u}`,`DTEND:${s}T${b}`,`SUMMARY:${l.icon} ${l.name}${m?` - ${m}`:""}`,`LOCATION:${r?.name||""}`,`STATUS:${n.is_published?"CONFIRMED":"TENTATIVE"}`,"END:VEVENT"].join(`\r
`))}),Me.forEach(n=>{let l=Be(n.event_type),r=n.start_date.replace(/-/g,""),d=(n.end_date||n.start_date).replace(/-/g,"");o.push(["BEGIN:VEVENT",`UID:icebooks-event-${n.id}@icebooks`,`DTSTAMP:${new Date().toISOString().replace(/[-:]/g,"").split(".")[0]}Z`,`DTSTART;VALUE=DATE:${r}`,`DTEND;VALUE=DATE:${d}`,`SUMMARY:${l.icon} ${n.name}`,`DESCRIPTION:${n.notes||""}`,"END:VEVENT"].join(`\r
`))}),["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//IceBooks Pro//EN","X-WR-CALNAME:IceBooks Schedule","METHOD:PUBLISH",...o,"END:VCALENDAR"].join(`\r
`)},Tn=()=>{let o=En(),n=new Blob([o],{type:"text/calendar"}),l=URL.createObjectURL(n),r=document.createElement("a");r.href=l,r.download=`icebooks-${new Date().toISOString().split("T")[0]}.ics`,r.click(),URL.revokeObjectURL(l),y("Calendar exported! Import into Google/Outlook/Apple Calendar.")},Dn=async o=>{let n=o.target.files?.[0];if(!n)return;let l=await n.text(),r=[],d=null;l.split(/\r?\n/).forEach(s=>{if(s.startsWith("BEGIN:VEVENT"))d={};else if(s.startsWith("END:VEVENT")&&d?.date)r.push(d),d=null;else if(d)if(s.startsWith("SUMMARY:"))d.name=s.slice(8).replace(/\\,/g,",").replace(/\\n/g," ");else if(s.startsWith("DTSTART")){let u=s.split(":").pop().replace(/[^0-9T]/g,"");u.length>=8&&(d.date=`${u.slice(0,4)}-${u.slice(4,6)}-${u.slice(6,8)}`,u.includes("T")&&u.length>=13&&(d.start_time=`${u.split("T")[1].slice(0,2)}:${u.split("T")[1].slice(2,4)}`))}else if(s.startsWith("DTEND")&&s.includes("T")){let u=s.split(":").pop().replace(/[^0-9T]/g,"");u.length>=13&&(d.end_time=`${u.split("T")[1].slice(0,2)}:${u.split("T")[1].slice(2,4)}`)}else s.startsWith("LOCATION:")&&(d.location=s.slice(9).replace(/\\,/g,","))});let m=0;for(let s of r)if(s.name&&s.date){let{error:u}=await g.from("events").insert({name:s.name.slice(0,100),event_type:"personal",start_date:s.date,end_date:s.date,notes:`Imported from ICS${s.location?` - Location: ${s.location}`:""}`});u||m++}m>0?(y(`Imported ${m} events! Check the Events tab.`),P()):y("No events found in file."),o.target.value=""},In=()=>{let o=window.location.origin+window.location.pathname,n=i?.access_token?.slice(0,20)||"demo";return`${on}/functions/v1/calendar-feed?token=${n}`},An=()=>{let o=In();navigator.clipboard.writeText(o).then(()=>{y("Live Sync URL copied! Paste into Google Calendar or Outlook.")}).catch(()=>{prompt("Copy this URL:",o)})},nt=(o=null,n=null)=>{if(o)K(o),de({date:o.date,start_time:o.start_time,end_time:o.end_time,lesson_type:o.lesson_type,venue_id:o.venue_id||"",max_students:o.max_students,is_published:o.is_published,notes:o.notes||"",rate:o.rate||ne(o.lesson_type).rate});else{K(null);let l=M(n||new Date);de({date:l,start_time:"09:00",end_time:"09:30",lesson_type:"private",venue_id:ie[0]?.id||"",max_students:1,is_published:!0,notes:"",rate:75})}L("lesson")},Pn=async()=>{try{let o={...W,venue_id:W.venue_id||null};if(D){let{error:n}=await g.from("lessons").update(o).eq("id",D.id);if(n)throw n;y("Lesson updated")}else{let{error:n}=await g.from("lessons").insert(o);if(n)throw n;y("Lesson created")}L(null),P(v)}catch(o){y("Error: "+o.message)}},Bn=async o=>{if(confirm("Delete this lesson?"))try{let{error:n}=await g.from("lessons").delete().eq("id",o);if(n)throw n;y("Lesson deleted"),L(null),P(v)}catch(n){y("Error: "+n.message)}},Ln=o=>{fn(o),tt([]),L("copyDay")},Nn=async()=>{if(!(!Ce||ce.length===0))try{let o=M(Ce),n=Q.filter(m=>m.date===o);if(n.length===0){y("No lessons to copy");return}let l=Ve(Ce),r=0,d=0;for(let m of ce){let s=M(l[m]),u=Q.filter(b=>b.date===s).map(b=>`${b.start_time}-${b.end_time}`);for(let b of n){let p=`${b.start_time}-${b.end_time}`;if(u.includes(p)){d++;continue}let{id:S,created_at:c,...f}=b;await g.from("lessons").insert({...f,date:s,is_published:!1}),r++}}y(`Copied ${r} lessons${d>0?`, skipped ${d} conflicts`:""}`),L(null),P(v)}catch(o){y("Error: "+o.message)}},zn=()=>{Dt(1),L("copyWeek")},$n=async()=>{try{let o=Ve(ae),n=M(o[0]),l=M(o[6]),r=Q.filter(s=>s.date>=n&&s.date<=l);if(r.length===0){y("No lessons to copy");return}let d=0,m=0;for(let s=1;s<=Ae;s++)for(let u of r){let b=new Date(u.date+"T00:00:00"),p=new Date(b);p.setDate(b.getDate()+s*7);let S=M(p);if(Q.find(O=>O.date===S&&O.start_time===u.start_time&&O.end_time===u.end_time)){m++;continue}let{id:f,created_at:_,...B}=u;await g.from("lessons").insert({...B,date:S,is_published:!1}),d++}y(`Copied ${d} lessons to ${Ae} week(s)${m>0?`, skipped ${m} conflicts`:""}`),L(null),P(v)}catch(o){y("Error: "+o.message)}},je=(o=null)=>{if(o)K(o),ve({name:o.name,event_type:o.event_type,start_date:o.start_date,end_date:o.end_date||o.start_date,venue_id:o.venue_id||"",notes:o.notes||"",is_registrable:o.is_registrable||!1});else{K(null);let n=M(new Date);ve({name:"",event_type:"competition",start_date:n,end_date:n,venue_id:"",notes:"",is_registrable:!1})}L("event")},Mn=async()=>{try{let o={...j,venue_id:j.venue_id||null};if(D){let{error:n}=await g.from("events").update(o).eq("id",D.id);if(n)throw n;y("Event updated")}else{let{error:n}=await g.from("events").insert(o);if(n)throw n;y("Event created")}L(null),P(v)}catch(o){y("Error: "+o.message)}},Fn=async o=>{if(confirm("Delete this event?"))try{let{error:n}=await g.from("events").delete().eq("id",o);if(n)throw n;y("Event deleted"),L(null),P(v)}catch(n){y("Error: "+n.message)}},ot=(o=null)=>{o?(K(o),q({name:o.name||"",email:o.email||"",phone:o.phone||"",address:o.address||"",city:o.city||"",state:o.state||"",zip:o.zip||"",parent2_name:o.parent2_name||"",parent2_email:o.parent2_email||"",parent2_phone:o.parent2_phone||"",notes:o.notes||""})):(K(null),q({name:"",email:"",phone:"",address:"",city:"",state:"",zip:"",parent2_name:"",parent2_email:"",parent2_phone:"",notes:"",child_name:"",child_email:"",child_birthdate:""})),L("client")},Gn=async()=>{try{let{child_name:o,child_email:n,child_birthdate:l,...r}=A;F||(r.profile_id=v.id);let d=D?.id;if(D){let{error:u}=await g.from("clients").update(r).eq("id",D.id);if(u)throw u;y("Client updated")}else{let{data:u,error:b}=await g.from("clients").insert(r).select().single();if(b)throw b;d=u.id,y("Client added")}let m=o||"",s=n||"";if(!D&&m.trim()){let u={client_id:d,name:m.trim(),email:s.trim()||null,birthdate:l||null,notes:""};await g.from("students").insert(u),y("Student created for "+m+" - Edit student to add skill levels")}else if(!D&&!m.trim()){let u={client_id:d,name:A.name,email:A.email||null,birthdate:null,notes:"Adult student"},{error:b}=await g.from("students").insert(u);b?(console.error("Student insert error:",b),y("Client saved but student creation failed: "+b.message)):y("Student record created - Edit to add skill levels")}L(null),P(v)}catch(o){y("Error: "+o.message)}},Wn=async o=>{if(confirm("Delete this client and all their students?"))try{let{error:n}=await g.from("clients").delete().eq("id",o);if(n)throw n;y("Client deleted"),P(v)}catch(n){y("Error: "+n.message)}},Le=(o=null,n=null)=>{o?(K(o),z({client_id:o.client_id,name:o.name||"",email:o.email||"",birthdate:o.birthdate||"",isi_freestyle:o.isi_freestyle||"",isi_figures:o.isi_figures||"",isi_couples:o.isi_couples||"",isi_pairs:o.isi_pairs||"",isi_icedance:o.isi_icedance||"",isi_international_dance:o.isi_international_dance||"",isi_freedance_partnered:o.isi_freedance_partnered||"",isi_solo_freedance:o.isi_solo_freedance||"",isi_synchro:o.isi_synchro||"",isi_special_skater:o.isi_special_skater||"",isi_number:o.isi_number||"",usfsa_skating_skills:o.usfsa_skating_skills||"",usfsa_singles:o.usfsa_singles||"",usfsa_pattern_dance:o.usfsa_pattern_dance||"",usfsa_free_dance:o.usfsa_free_dance||"",usfsa_pairs:o.usfsa_pairs||"",usfsa_number:o.usfsa_number||"",notes:o.notes||""})):(K(null),z({client_id:n||oe[0]?.id||"",name:"",email:"",birthdate:"",isi_freestyle:"",isi_figures:"",isi_couples:"",isi_pairs:"",isi_icedance:"",isi_international_dance:"",isi_freedance_partnered:"",isi_solo_freedance:"",isi_synchro:"",isi_special_skater:"",isi_number:"",usfsa_skating_skills:"",usfsa_singles:"",usfsa_pattern_dance:"",usfsa_free_dance:"",usfsa_pairs:"",usfsa_number:"",notes:""})),L("student")},On=async()=>{try{let o={...C};if(!o.name||!o.name.trim()){let n=oe.find(l=>l.id===o.client_id);n&&(o.name=n.name,(!o.email||!o.email.trim())&&(o.email=n.email||null))}if(!o.name||!o.name.trim()){y("Please enter a student name");return}if(D){let{error:n}=await g.from("students").update(o).eq("id",D.id);if(n)throw n;y("Student updated")}else{let{error:n}=await g.from("students").insert(o);if(n)throw n;y("Student added")}L(null),P(v)}catch(o){y("Error: "+o.message)}},Lt=async o=>{if(confirm("Delete this student?"))try{let{error:n}=await g.from("students").delete().eq("id",o);if(n)throw n;y("Student deleted"),P(v)}catch(n){y("Error: "+n.message)}},Un=async(o,n)=>{try{let l=Q.find(u=>u.id===o);if(!l)throw new Error("Lesson not found");let{data:r,error:d}=await g.from("bookings").select("id, student_id").eq("lesson_id",o).neq("status","cancelled");if(d)throw d;if(r.length>=l.max_students){y("Lesson is full"),P(v);return}if(r.find(u=>u.student_id===n)){y("Student already booked");return}let{error:s}=await g.from("bookings").insert({lesson_id:o,student_id:n,booked_by:v.id,status:"confirmed"});if(s)throw s;if(F){let u=G.find(p=>p.id===n),b=ne(l.lesson_type);await Bt("booking",`${u?.name} booked ${b.name} on ${l.date}`,o,null,n)}y("Lesson booked!"),P(v)}catch(l){y("Error: "+l.message)}},Hn=async o=>{try{let n=V.find(m=>m.id===o);if(!n)throw new Error("Booking not found");let l=Q.find(m=>m.id===n.lesson_id),r=!1;if(l){let u=(new Date(`${l.date}T${l.start_time}`)-new Date)/(1e3*60*60);r=u<tn&&u>0}let{error:d}=await g.from("bookings").update({status:"cancelled",cancelled_at:new Date().toISOString(),is_late_cancellation:r}).eq("id",o);if(d)throw d;y(r?"Cancelled (late - may be billed)":"Booking cancelled"),P(v)}catch(n){y("Error: "+n.message)}},Vn=o=>{cn(o),It(""),L("registerCompetition")},jn=async()=>{if(!te||!ke){y("Please select a student");return}try{if(V.find(l=>l.event_id===te.id&&l.student_id===parseInt(ke)&&l.status!=="cancelled")){y("Student already registered");return}let{error:n}=await g.from("bookings").insert({event_id:te.id,student_id:parseInt(ke),booked_by:v.id,status:"confirmed"});if(n)throw n;if(F){let l=G.find(r=>r.id===parseInt(ke));await Bt("registration",`${l?.name} registered for ${te.name}`,null,te.id,parseInt(ke))}y("Registered for competition!"),L(null),P(v)}catch(o){y("Error: "+o.message)}},qn=async o=>{if(confirm("Cancel this registration?"))try{let{error:n}=await g.from("bookings").update({status:"cancelled",cancelled_at:new Date().toISOString()}).eq("id",o);if(n)throw n;y("Registration cancelled"),P(v)}catch(n){y("Error: "+n.message)}},[be,Ne]=(0,e.useState)({name:"",address:"",color:"#6366f1"}),Nt=(o=null)=>{o?(K(o),Ne({name:o.name,address:o.address||"",color:o.color||"#6366f1"})):(K(null),Ne({name:"",address:"",color:"#6366f1"})),L("venue")},Yn=async()=>{try{if(D){let{error:o}=await g.from("venues").update(be).eq("id",D.id);if(o)throw o;y("Venue updated")}else{let{error:o}=await g.from("venues").insert(be);if(o)throw o;y("Venue added")}L(null),P(v)}catch(o){y("Error: "+o.message)}},zt=async o=>{if(confirm("Delete this venue?"))try{let{error:n}=await g.from("venues").delete().eq("id",o);if(n)throw n;y("Venue deleted"),P(v)}catch(n){y("Error: "+n.message)}},Jn=(o=null)=>{let{lessons:n,lateCancellations:l}=$t(o),r=n.reduce((s,u)=>s+(u.rate||ne(u.lesson_type).rate),0),d=l.reduce((s,u)=>s+(u.rate||ne(u.lesson_type).rate),0),m=r+d;ue({client_id:o||"",lessons:n.map(s=>s.id),lateCancellations:l.map(s=>s.id),amount:m,tax_rate:0,notes:"",due_date:M(new Date(Date.now()+720*60*60*1e3)),payment_cash:$.cash||!1,payment_check:$.check||!1,payment_venmo:$.venmo||"",payment_paypal:$.paypal||"",payment_zelle:$.zelle||"",payment_cashapp:$.cashapp||""}),L("invoice")},$t=o=>{if(!o)return{lessons:[],lateCancellations:[]};let n=G.filter(s=>s.client_id===parseInt(o)).map(s=>s.id),l=V.filter(s=>n.includes(s.student_id)&&s.status==="completed"&&!s.invoice_id),r=Q.filter(s=>l.some(u=>u.lesson_id===s.id)),d=V.filter(s=>n.includes(s.student_id)&&s.status==="cancelled"&&s.is_late_cancellation&&!s.invoice_id),m=Q.filter(s=>d.some(u=>u.lesson_id===s.id));return{lessons:r,lateCancellations:m}},Kn=async()=>{try{let{data:o,error:n}=await g.from("invoices").insert({client_id:k.client_id,amount:k.amount,tax_rate:k.tax_rate,total:k.amount*(1+k.tax_rate/100),notes:k.notes,due_date:k.due_date,status:"draft",payment_cash:k.payment_cash,payment_check:k.payment_check,payment_venmo:k.payment_venmo,payment_paypal:k.payment_paypal,payment_zelle:k.payment_zelle,payment_cashapp:k.payment_cashapp}).select().single();if(n)throw n;if(k.lessons.length>0){let l=V.filter(r=>k.lessons.includes(r.lesson_id)&&r.status==="completed").map(r=>r.id);l.length>0&&await g.from("bookings").update({invoice_id:o.id}).in("id",l)}if(k.lateCancellations.length>0){let l=V.filter(r=>k.lateCancellations.includes(r.lesson_id)&&r.is_late_cancellation).map(r=>r.id);l.length>0&&await g.from("bookings").update({invoice_id:o.id}).in("id",l)}y("Invoice created"),L(null),P(v)}catch(o){y("Error: "+o.message)}},it=async(o,n)=>{try{let l={status:n};n==="paid"&&(l.paid_at=new Date().toISOString());let{error:r}=await g.from("invoices").update(l).eq("id",o);if(r)throw r;y(`Invoice marked as ${n}`),P(v)}catch(l){y("Error: "+l.message)}},Xn=async o=>{try{let n=Qe.find(m=>m.id===o);if(!n)throw new Error("Invoice not found");let l=oe.find(m=>m.id===n.client_id);if(!l?.email){y("Client has no email address");return}let r=[];n.payment_cash&&r.push("Cash"),n.payment_check&&r.push("Check"),n.payment_venmo&&r.push(`Venmo: ${n.payment_venmo}`),n.payment_paypal&&r.push(`PayPal: ${n.payment_paypal}`),n.payment_zelle&&r.push(`Zelle: ${n.payment_zelle}`),n.payment_cashapp&&r.push(`Cash App: ${n.payment_cashapp}`);let{error:d}=await g.functions.invoke("send-invoice",{body:{to:l.email,clientName:l.name,invoiceId:n.id,amount:n.total,dueDate:n.due_date,notes:n.notes,paymentMethods:r.join(`
`),coachName:v?.name||"Your Coach"}});if(d)throw d;await it(o,"sent"),y("Invoice emailed to "+l.email)}catch(n){y("Error sending email: "+n.message)}},ai=async()=>{try{let{data:o,error:n}=await g.from("settings").select("*").single();o&&fe({cash:o.payment_cash||!1,check:o.payment_check||!1,venmo:o.payment_venmo||"",paypal:o.payment_paypal||"",zelle:o.payment_zelle||"",cashapp:o.payment_cashapp||""})}catch{}},Zn=async()=>{try{let{data:o}=await g.from("settings").select("id").single(),n={payment_cash:$.cash,payment_check:$.check,payment_venmo:$.venmo,payment_paypal:$.paypal,payment_zelle:$.zelle,payment_cashapp:$.cashapp};if(o){let{error:l}=await g.from("settings").update(n).eq("id",o.id);if(l)throw l}else{let{error:l}=await g.from("settings").insert(n);if(l)throw l}y("Payment settings saved"),L(null)}catch(o){y("Error: "+o.message)}},Mt=(o=null)=>{o?(K(o),ge({date:o.date,category:o.category,description:o.description||"",amount:o.amount,vendor:o.vendor||"",payment_method:o.payment_method||"Credit Card"})):(K(null),ge({date:M(new Date),category:"Ice Time",description:"",amount:"",vendor:"",payment_method:"Credit Card"})),L("expense")},Qn=async()=>{try{let o={...ee,amount:parseFloat(ee.amount)};if(D){let{error:n}=await g.from("expenses").update(o).eq("id",D.id);if(n)throw n;y("Expense updated")}else{let{error:n}=await g.from("expenses").insert(o);if(n)throw n;y("Expense added")}L(null),P(v)}catch(o){y("Error: "+o.message)}},Rn=async o=>{if(confirm("Delete this expense?"))try{let{error:n}=await g.from("expenses").delete().eq("id",o);if(n)throw n;y("Expense deleted"),P(v)}catch(n){y("Error: "+n.message)}},Ft=(o=null)=>{o?(K(o),pe({date:o.date,description:o.description||"",miles:o.miles,rate:o.rate||Je,odometer_start:o.odometer_start||"",odometer_end:o.odometer_end||"",entry_type:o.odometer_start?"odometer":"manual"})):(K(null),pe({date:M(new Date),description:"",miles:"",rate:Je,odometer_start:"",odometer_end:"",entry_type:"manual"})),L("mileage")},eo=async()=>{try{let o=parseFloat(w.miles);if(w.entry_type==="odometer"&&w.odometer_start&&w.odometer_end&&(o=parseFloat(w.odometer_end)-parseFloat(w.odometer_start),o<0)){y("End odometer must be greater than start");return}if(!o||o<=0){y("Please enter valid mileage");return}let n={date:w.date,description:w.description,miles:o,rate:parseFloat(w.rate),amount:o*parseFloat(w.rate),odometer_start:w.entry_type==="odometer"?parseFloat(w.odometer_start):null,odometer_end:w.entry_type==="odometer"?parseFloat(w.odometer_end):null};if(D){let{error:l}=await g.from("mileage").update(n).eq("id",D.id);if(l)throw l;y("Mileage updated")}else{let{error:l}=await g.from("mileage").insert(n);if(l)throw l;y("Mileage logged")}L(null),P(v)}catch(o){y("Error: "+o.message)}},to=async o=>{if(confirm("Delete this mileage entry?"))try{let{error:n}=await g.from("mileage").delete().eq("id",o);if(n)throw n;y("Mileage deleted"),P(v)}catch(n){y("Error: "+n.message)}},t={container:{minHeight:"100vh",background:"#f8fafc",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'},header:{background:"linear-gradient(135deg, #7c3aed 0%, #a855f7 100%)",color:"white",padding:"16px 20px",boxShadow:"0 2px 8px rgba(124,58,237,0.3)"},headerContent:{maxWidth:1200,margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:12},logo:{fontSize:24,fontWeight:700,display:"flex",alignItems:"center",gap:8},userInfo:{display:"flex",alignItems:"center",gap:12,fontSize:14},main:{maxWidth:1200,margin:"0 auto",padding:20},nav:{display:"flex",gap:4,overflowX:"auto",paddingBottom:8,marginBottom:20,borderBottom:"1px solid #e2e8f0"},navBtn:{padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",borderRadius:8,fontWeight:500,color:"#64748b",whiteSpace:"nowrap",transition:"all 0.2s"},navBtnActive:{background:"#7c3aed",color:"white"},card:{background:"white",borderRadius:12,padding:20,marginBottom:16,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:12},cardTitle:{fontSize:18,fontWeight:600,color:"#0f172a"},btn:{padding:"10px 20px",border:"none",borderRadius:8,cursor:"pointer",fontWeight:500,fontSize:14,transition:"all 0.2s"},btnPrimary:{background:"#7c3aed",color:"white"},btnSecondary:{background:"#f1f5f9",color:"#475569"},btnDanger:{background:"#ef4444",color:"white"},btnSuccess:{background:"#10b981",color:"white"},btnSmall:{padding:"6px 12px",fontSize:13},formGroup:{marginBottom:16},label:{display:"block",marginBottom:6,fontWeight:500,color:"#374151",fontSize:14},input:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:8,fontSize:14,boxSizing:"border-box"},select:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:8,fontSize:14,boxSizing:"border-box",background:"white"},textarea:{width:"100%",padding:"10px 12px",border:"1px solid #d1d5db",borderRadius:8,fontSize:14,boxSizing:"border-box",minHeight:80,resize:"vertical"},checkbox:{marginRight:8},row:{display:"grid",gridTemplateColumns:me?"1fr":"1fr 1fr",gap:16},modalOverlay:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:20,zIndex:1e3},modal:{background:"white",borderRadius:16,width:"100%",maxWidth:500,maxHeight:"90vh",overflow:"auto"},modalHeader:{padding:"16px 20px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"},modalTitle:{fontSize:18,fontWeight:600},modalBody:{padding:20},modalFooter:{padding:"16px 20px",borderTop:"1px solid #e2e8f0",display:"flex",justifyContent:"flex-end",gap:12},calendarHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:12},calendarNav:{display:"flex",alignItems:"center",gap:12},calendarGrid:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4},calendarDayHeader:{padding:8,textAlign:"center",fontWeight:600,color:"#64748b",fontSize:12},calendarDay:{minHeight:me?60:100,padding:8,background:"white",borderRadius:8,border:"1px solid #e2e8f0",cursor:"pointer"},calendarDayToday:{border:"2px solid #7c3aed"},calendarDayNum:{fontWeight:600,fontSize:14,marginBottom:4},calendarLesson:{fontSize:11,padding:"2px 4px",marginBottom:2,borderRadius:4,color:"white",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},table:{width:"100%",borderCollapse:"collapse"},th:{textAlign:"left",padding:"12px 8px",borderBottom:"2px solid #e2e8f0",fontWeight:600,color:"#64748b",fontSize:13},td:{padding:"12px 8px",borderBottom:"1px solid #e2e8f0",fontSize:14},listItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:16,borderBottom:"1px solid #e2e8f0"},listItemLast:{borderBottom:"none"},authContainer:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #7c3aed 0%, #a855f7 100%)",padding:20},authCard:{background:"white",borderRadius:16,padding:32,width:"100%",maxWidth:400,boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},authLogo:{textAlign:"center",fontSize:32,marginBottom:8},authTitle:{textAlign:"center",fontSize:24,fontWeight:700,color:"#0f172a",marginBottom:4},authSub:{textAlign:"center",color:"#64748b",marginBottom:24},authTabs:{display:"flex",marginBottom:24,background:"#f1f5f9",borderRadius:8,padding:4},authTab:{flex:1,padding:"10px 16px",border:"none",background:"transparent",cursor:"pointer",borderRadius:6,fontWeight:500,color:"#64748b",transition:"all 0.2s"},authTabActive:{background:"white",color:"#0f172a",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},badge:{display:"inline-block",padding:"4px 8px",borderRadius:12,fontSize:12,fontWeight:500},badgeSuccess:{background:"#dcfce7",color:"#166534"},badgeWarning:{background:"#fef3c7",color:"#92400e"},badgeDanger:{background:"#fee2e2",color:"#991b1b"},badgeInfo:{background:"#dbeafe",color:"#1e40af"},statsGrid:{display:"grid",gridTemplateColumns:me?"1fr 1fr":"repeat(4, 1fr)",gap:16,marginBottom:20},statCard:{background:"white",borderRadius:12,padding:20,textAlign:"center",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},statValue:{fontSize:28,fontWeight:700,color:"#7c3aed"},statLabel:{color:"#64748b",fontSize:14,marginTop:4},loading:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#f8fafc"},spinner:{fontSize:48,animation:"spin 1s linear infinite"},toast:{position:"fixed",bottom:24,left:"50%",transform:"translateX(-50%)",background:"#0f172a",color:"white",padding:"12px 24px",borderRadius:8,fontSize:14,zIndex:2e3,boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},error:{background:"#fee2e2",color:"#991b1b",padding:12,borderRadius:8,marginBottom:16,fontSize:14},empty:{textAlign:"center",color:"#64748b",padding:40}};if(!i)return e.default.createElement("div",{style:t.authContainer},e.default.createElement("div",{style:t.authCard},e.default.createElement("div",{style:t.authLogo},"\u26F8\uFE0F"),e.default.createElement("h1",{style:t.authTitle},"IceBooks Pro"),e.default.createElement("p",{style:t.authSub},"Figure Skating Coach Management"),e.default.createElement("div",{style:t.authTabs},e.default.createElement("button",{style:{...t.authTab,...I==="signin"?t.authTabActive:{}},onClick:()=>X("signin")},"Sign In"),e.default.createElement("button",{style:{...t.authTab,...I==="signup"?t.authTabActive:{}},onClick:()=>X("signup")},"Sign Up")),bt&&e.default.createElement("div",{style:t.error},bt),e.default.createElement("form",{onSubmit:I==="signin"?bn:hn},I==="signup"&&e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Name"),e.default.createElement("input",{style:t.input,type:"text",value:ft,onChange:o=>ct(o.target.value),placeholder:"Your name",required:!0})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Email"),e.default.createElement("input",{style:t.input,type:"email",value:U,onChange:o=>$e(o.target.value),placeholder:"you@example.com",required:!0})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Password"),e.default.createElement("input",{style:t.input,type:"password",value:Xe,onChange:o=>gt(o.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,minLength:6})),e.default.createElement("button",{type:"submit",style:{...t.btn,...t.btnPrimary,width:"100%"}},I==="signin"?"Sign In":"Create Account"))));if(E)return e.default.createElement("div",{style:t.loading},e.default.createElement("div",{style:t.spinner},"\u26F8\uFE0F"),e.default.createElement("div",null,"Loading..."));let no=()=>{let o=Ve(ae),n=Pt(ae),l=M(new Date),r=s=>{let u=M(s);return Q.filter(b=>b.date===u)},d=s=>{let u=M(s);return Me.filter(b=>u>=b.start_date&&u<=(b.end_date||b.start_date))},m=(s,u=!1)=>{let b=M(s),p=r(s),S=d(s),c=b===l,f=J==="month"&&me;return e.default.createElement("div",{key:b,style:{...t.calendarDay,...c?t.calendarDayToday:{},opacity:u?.4:1,minHeight:J==="month"?me?40:80:120},onClick:()=>F&&nt(null,s)},e.default.createElement("div",{style:t.calendarDayNum},s.getDate()),f?(p.length>0||S.length>0)&&e.default.createElement("div",{style:{display:"flex",gap:2,flexWrap:"wrap",marginTop:2}},S.slice(0,2).map(_=>e.default.createElement("span",{key:`e-${_.id}`,style:{width:6,height:6,borderRadius:"50%",background:Be(_.event_type).color}})),p.slice(0,3).map(_=>e.default.createElement("span",{key:`l-${_.id}`,style:{width:6,height:6,borderRadius:"50%",background:ne(_.lesson_type).color}}))):e.default.createElement(e.default.Fragment,null,S.map(_=>{let B=Be(_.event_type);return e.default.createElement("div",{key:`e-${_.id}`,style:{...t.calendarLesson,background:B.color},onClick:O=>{O.stopPropagation(),F&&je(_)}},B.icon," ",J==="month"?"":_.name)}),p.sort((_,B)=>_.start_time.localeCompare(B.start_time)).map(_=>{let B=ne(_.lesson_type),O=ie.find(he=>he.id===_.venue_id),qe=V.filter(he=>he.lesson_id===_.id&&he.status!=="cancelled"),lt=qe.length,ze=qe.map(he=>G.find(bo=>bo.id===he.student_id)?.name).filter(Boolean);return e.default.createElement("div",{key:`l-${_.id}`,style:{...t.calendarLesson,background:B.color,opacity:_.is_published?1:.5,position:"relative"},onClick:he=>{he.stopPropagation(),nt(_)}},Pe(_.start_time)," ",B.icon," ",lt,"/",_.max_students,ze.length>0&&e.default.createElement("div",{style:{fontSize:10,opacity:.9,marginTop:2,fontWeight:400}},ze.join(", ")),O?.color&&e.default.createElement("span",{style:{position:"absolute",top:2,right:2,width:6,height:6,borderRadius:"50%",background:O.color,border:"1px solid rgba(255,255,255,0.5)"}}))}),F&&p.length>0&&e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginTop:4,width:"100%",fontSize:10},onClick:_=>{_.stopPropagation(),Ln(s)}},"Copy Day")))};return e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.calendarHeader},e.default.createElement("div",{style:t.calendarNav},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:()=>{let s=new Date(ae);J==="month"?s.setMonth(s.getMonth()-1):s.setDate(s.getDate()-7),Ge(s)}},"\u2190 Prev"),e.default.createElement("h2",{style:{margin:0,fontSize:18}},J==="month"?ae.toLocaleDateString("en-US",{month:"long",year:"numeric"}):`${o[0].toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${o[6].toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:()=>{let s=new Date(ae);J==="month"?s.setMonth(s.getMonth()+1):s.setDate(s.getDate()+7),Ge(s)}},"Next \u2192")),e.default.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"}},e.default.createElement("div",{style:{display:"flex",borderRadius:6,overflow:"hidden",border:"1px solid #e2e8f0"}},e.default.createElement("button",{style:{...t.btn,padding:"6px 12px",borderRadius:0,background:J==="month"?"#7c3aed":"#f8fafc",color:J==="month"?"white":"#64748b",border:"none"},onClick:()=>Re("month")},"Month"),e.default.createElement("button",{style:{...t.btn,padding:"6px 12px",borderRadius:0,background:J==="week"?"#7c3aed":"#f8fafc",color:J==="week"?"white":"#64748b",border:"none"},onClick:()=>Re("week")},"Week"),F&&e.default.createElement("button",{style:{...t.btn,padding:"6px 12px",borderRadius:0,background:J==="day"?"#7c3aed":"#f8fafc",color:J==="day"?"white":"#64748b",border:"none"},onClick:()=>{Re("day"),R||We(new Date)}},"Day")),F&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:{position:"relative"}},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary,position:"relative"},onClick:()=>vn(!xt)},"\u{1F514}",Ie.filter(s=>!s.read).length>0&&e.default.createElement("span",{style:{position:"absolute",top:-5,right:-5,background:"#ef4444",color:"white",borderRadius:"50%",width:20,height:20,fontSize:11,display:"flex",alignItems:"center",justifyContent:"center"}},Ie.filter(s=>!s.read).length)),xt&&e.default.createElement("div",{style:{position:"absolute",top:"100%",right:0,marginTop:8,background:"white",border:"1px solid #e2e8f0",borderRadius:8,boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)",width:320,maxHeight:400,overflow:"auto",zIndex:1e3}},e.default.createElement("div",{style:{padding:"12px 16px",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center"}},e.default.createElement("strong",null,"Notifications"),Ie.filter(s=>!s.read).length>0&&e.default.createElement("button",{style:{...t.btn,padding:"4px 8px",fontSize:12},onClick:Cn},"Mark all read")),Ie.length===0?e.default.createElement("div",{style:{padding:20,textAlign:"center",color:"#94a3b8"}},"No notifications"):Ie.map(s=>e.default.createElement("div",{key:s.id,style:{padding:12,borderBottom:"1px solid #f1f5f9",background:s.read?"white":"#f0f9ff",cursor:"pointer"},onClick:()=>!s.read&&Sn(s.id)},e.default.createElement("div",{style:{fontSize:14,marginBottom:4}},s.message),e.default.createElement("div",{style:{fontSize:12,color:"#64748b"}},new Date(s.created_at).toLocaleString()))))),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>nt()},"+ Lesson"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:()=>je()},"+ Event"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:zn},"Copy Week")))),F&&e.default.createElement("div",{style:{display:"flex",gap:8,marginBottom:16,flexWrap:"wrap"}},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary,...t.btnSmall},onClick:Tn},"\u{1F4E4} Export .ics"),e.default.createElement("label",{style:{...t.btn,...t.btnSecondary,...t.btnSmall,cursor:"pointer",margin:0}},"\u{1F4E5} Import .ics",e.default.createElement("input",{type:"file",accept:".ics,.ical",onChange:Dn,style:{display:"none"}})),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary,...t.btnSmall},onClick:An},"\u{1F517} Live Sync URL")),e.default.createElement("div",{style:t.calendarGrid},mt.map(s=>e.default.createElement("div",{key:s,style:t.calendarDayHeader},s)),J==="month"?n.map(({date:s,outside:u})=>m(s,u)):J==="week"?o.map(s=>m(s)):null),J==="day"&&R&&e.default.createElement("div",{style:{marginTop:24}},e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16,flexWrap:"wrap",gap:8}},e.default.createElement("h3",{style:{fontSize:18,fontWeight:600}},"Schedule for ",R.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})),e.default.createElement("div",{style:{display:"flex",gap:8}},me&&e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>{pe({...w,date:R.toISOString().split("T")[0]}),L("mileage")}},"\u26FD Add Mileage"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:wn},"\u{1F5A8}\uFE0F Print"))),(()=>{let s=Q.filter(u=>u.date===R.toISOString().split("T")[0]).sort((u,b)=>u.start_time.localeCompare(b.start_time));return s.length===0?e.default.createElement("div",{style:t.empty},"No lessons scheduled for this day"):s.map(u=>{let b=ne(u.lesson_type),p=ie.find(c=>c.id===u.venue_id),S=V.filter(c=>c.lesson_id===u.id&&c.status!=="cancelled");return e.default.createElement("div",{key:u.id,style:{...t.card,marginBottom:16,borderLeft:`4px solid ${b.color}`}},e.default.createElement("div",{style:{padding:16}},e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:12}},e.default.createElement("div",null,e.default.createElement("div",{style:{fontSize:18,fontWeight:600,marginBottom:4}},b.icon," ",b.name),e.default.createElement("div",{style:{color:"#64748b",fontSize:14}},u.start_time," - ",u.end_time,p&&e.default.createElement("span",{style:{marginLeft:12}},"\u{1F4CD} ",p.name,p.color&&e.default.createElement("span",{style:{display:"inline-block",width:8,height:8,borderRadius:"50%",background:p.color,marginLeft:6}}))),e.default.createElement("div",{style:{color:"#64748b",fontSize:14,marginTop:4}},"Rate: $",u.rate," | Max: ",u.max_students," | Published: ",u.is_published?"Yes":"No"))),e.default.createElement("div",{style:{marginTop:12,paddingTop:12,borderTop:"1px solid #e2e8f0"}},e.default.createElement("div",{style:{fontWeight:600,marginBottom:8}},"Booked Students (",S.length,"/",u.max_students,")"),S.length===0?e.default.createElement("div",{style:{color:"#94a3b8",fontStyle:"italic"}},u.is_published?"No bookings yet":"Not published for booking"):e.default.createElement("div",{style:{display:"grid",gap:12}},S.map(c=>{let f=G.find(B=>B.id===c.student_id),_=oe.find(B=>B.id===f?.client_id);return e.default.createElement("div",{key:c.id,style:{background:"#f8fafc",padding:12,borderRadius:6,display:"grid",gridTemplateColumns:me?"1fr":"2fr 2fr 1fr",gap:12}},e.default.createElement("div",null,e.default.createElement("div",{style:{fontWeight:600}},f?.name||"Unknown"),e.default.createElement("div",{style:{fontSize:13,color:"#64748b"}},f?.isi_level&&`ISI: ${f.isi_level}`,f?.isi_level&&f?.usfsa_level&&" | ",f?.usfsa_level&&`USFSA: ${f.usfsa_level}`)),e.default.createElement("div",{style:{fontSize:13}},e.default.createElement("div",{style:{fontWeight:500}},_?.name),e.default.createElement("div",{style:{color:"#64748b"}},_?.phone),e.default.createElement("div",{style:{color:"#64748b"}},_?.email)),e.default.createElement("div",{style:{fontSize:13,color:"#64748b"}},"Booked: ",new Date(c.created_at).toLocaleDateString()))})))))})})()))},oo=()=>e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Clients"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>ot()},"+ Add Client")),oe.length===0?e.default.createElement("div",{style:t.empty},"No clients yet. Add your first client!"):e.default.createElement("div",{style:{overflowX:"auto"}},e.default.createElement("table",{style:t.table},e.default.createElement("thead",null,e.default.createElement("tr",null,e.default.createElement("th",{style:t.th},"Name"),e.default.createElement("th",{style:t.th},"Email"),e.default.createElement("th",{style:t.th},"Phone"),e.default.createElement("th",{style:t.th},"Students"),e.default.createElement("th",{style:t.th},"Actions"))),e.default.createElement("tbody",null,oe.map(o=>{let n=G.filter(l=>l.client_id===o.id);return e.default.createElement("tr",{key:o.id},e.default.createElement("td",{style:t.td},e.default.createElement("strong",null,o.name)),e.default.createElement("td",{style:t.td},o.email),e.default.createElement("td",{style:t.td},o.phone),e.default.createElement("td",{style:t.td},n.length),e.default.createElement("td",{style:t.td},e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>ot(o)},"Edit"),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>Le(null,o.id)},"+ Student"),F&&e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSuccess},onClick:()=>Jn(o.id)},"Invoice")))}))))),io=()=>e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Students"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>Le()},"+ Add Student")),G.length===0?e.default.createElement("div",{style:t.empty},"No students yet. Add students to your clients!"):e.default.createElement("div",{style:{overflowX:"auto"}},e.default.createElement("table",{style:t.table},e.default.createElement("thead",null,e.default.createElement("tr",null,e.default.createElement("th",{style:t.th},"Name"),e.default.createElement("th",{style:t.th},"Parent/Client"),e.default.createElement("th",{style:t.th},"ISI Level"),e.default.createElement("th",{style:t.th},"USFSA Level"),e.default.createElement("th",{style:t.th},"Actions"))),e.default.createElement("tbody",null,G.map(o=>{let n=oe.find(l=>l.id===o.client_id);return e.default.createElement("tr",{key:o.id},e.default.createElement("td",{style:t.td},e.default.createElement("strong",null,o.name)),e.default.createElement("td",{style:t.td},n?.name||"-"),e.default.createElement("td",{style:t.td},o.isi_level||"-"),e.default.createElement("td",{style:t.td},o.usfsa_level||"-"),e.default.createElement("td",{style:t.td},e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>Le(o)},"Edit"),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnDanger},onClick:()=>Lt(o.id)},"Delete")))}))))),lo=()=>e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Venues / Rinks"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>Nt()},"+ Add Venue")),ie.length===0?e.default.createElement("div",{style:t.empty},"No venues yet. Add your rinks!"):e.default.createElement("div",null,ie.map(o=>e.default.createElement("div",{key:o.id,style:t.listItem},e.default.createElement("div",null,e.default.createElement("strong",null,o.name),o.address&&e.default.createElement("div",{style:{color:"#64748b",fontSize:13}},o.address)),e.default.createElement("div",null,e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>Nt(o)},"Edit"),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnDanger},onClick:()=>zt(o.id)},"Delete")))))),so=()=>e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Invoices")),Qe.length===0?e.default.createElement("div",{style:t.empty},"No invoices yet. Create one from the Clients tab!"):e.default.createElement("div",{style:{overflowX:"auto"}},e.default.createElement("table",{style:t.table},e.default.createElement("thead",null,e.default.createElement("tr",null,e.default.createElement("th",{style:t.th},"Date"),e.default.createElement("th",{style:t.th},"Client"),e.default.createElement("th",{style:t.th},"Amount"),e.default.createElement("th",{style:t.th},"Status"),e.default.createElement("th",{style:t.th},"Actions"))),e.default.createElement("tbody",null,Qe.map(o=>{let n=oe.find(l=>l.id===o.client_id);return e.default.createElement("tr",{key:o.id},e.default.createElement("td",{style:t.td},ye(o.created_at)),e.default.createElement("td",{style:t.td},n?.name||"-"),e.default.createElement("td",{style:t.td},H(o.total||o.amount)),e.default.createElement("td",{style:t.td},e.default.createElement("span",{style:{...t.badge,...o.status==="paid"?t.badgeSuccess:o.status==="overdue"?t.badgeDanger:t.badgeWarning}},o.status)),e.default.createElement("td",{style:t.td},o.status==="draft"&&e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnPrimary,marginRight:8},onClick:()=>Xn(o.id),title:"Send invoice via email"},"\u{1F4E7} Send"),o.status!=="paid"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>it(o.id,"sent")},"Mark Sent"),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSuccess},onClick:()=>it(o.id,"paid")},"Mark Paid"))))}))))),ro=()=>{let o=Fe.reduce((n,l)=>n+(l.amount||0),0);return e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Expenses"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>Mt()},"+ Add Expense")),e.default.createElement("div",{style:{marginBottom:16,padding:16,background:"#f8fafc",borderRadius:8}},e.default.createElement("strong",null,"Total Expenses:")," ",H(o)),Fe.length===0?e.default.createElement("div",{style:t.empty},"No expenses recorded yet."):e.default.createElement("div",{style:{overflowX:"auto"}},e.default.createElement("table",{style:t.table},e.default.createElement("thead",null,e.default.createElement("tr",null,e.default.createElement("th",{style:t.th},"Date"),e.default.createElement("th",{style:t.th},"Category"),e.default.createElement("th",{style:t.th},"Description"),e.default.createElement("th",{style:t.th},"Amount"),e.default.createElement("th",{style:t.th},"Actions"))),e.default.createElement("tbody",null,Fe.map(n=>e.default.createElement("tr",{key:n.id},e.default.createElement("td",{style:t.td},ye(n.date)),e.default.createElement("td",{style:t.td},n.category),e.default.createElement("td",{style:t.td},n.description),e.default.createElement("td",{style:t.td},H(n.amount)),e.default.createElement("td",{style:t.td},e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>Mt(n)},"Edit"),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnDanger},onClick:()=>Rn(n.id)},"Delete"))))))))},ao=()=>{let o=xe.reduce((l,r)=>l+(r.miles||0),0),n=xe.reduce((l,r)=>l+(r.amount||0),0);return e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Mileage Log"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>Ft()},"+ Log Mileage")),e.default.createElement("div",{style:{marginBottom:16,padding:16,background:"#f8fafc",borderRadius:8,display:"flex",gap:24,flexWrap:"wrap"}},e.default.createElement("div",null,e.default.createElement("strong",null,"Total Miles:")," ",o.toFixed(1)),e.default.createElement("div",null,e.default.createElement("strong",null,"Tax Deduction:")," ",H(n))),xe.length===0?e.default.createElement("div",{style:t.empty},"No mileage logged yet."):e.default.createElement("div",{style:{overflowX:"auto"}},e.default.createElement("table",{style:t.table},e.default.createElement("thead",null,e.default.createElement("tr",null,e.default.createElement("th",{style:t.th},"Date"),e.default.createElement("th",{style:t.th},"Description"),e.default.createElement("th",{style:t.th},"Miles"),e.default.createElement("th",{style:t.th},"Rate"),e.default.createElement("th",{style:t.th},"Deduction"),e.default.createElement("th",{style:t.th},"Actions"))),e.default.createElement("tbody",null,xe.map(l=>e.default.createElement("tr",{key:l.id},e.default.createElement("td",{style:t.td},ye(l.date)),e.default.createElement("td",{style:t.td},l.description),e.default.createElement("td",{style:t.td},l.miles),e.default.createElement("td",{style:t.td},"$",l.rate,"/mi"),e.default.createElement("td",{style:t.td},H(l.amount)),e.default.createElement("td",{style:t.td},e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>Ft(l)},"Edit"),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnDanger},onClick:()=>to(l.id)},"Delete"))))))))},uo=()=>e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Reports")),e.default.createElement("div",{style:{marginBottom:24,display:"flex",gap:12,flexWrap:"wrap"}},e.default.createElement("button",{style:{...t.btn,...Ue==="pl"?t.btnPrimary:t.btnSecondary},onClick:()=>Et("pl")},"\u{1F4CA} Profit & Loss"),e.default.createElement("button",{style:{...t.btn,...Ue==="mileage"?t.btnPrimary:t.btnSecondary},onClick:()=>Et("mileage")},"\u{1F697} Mileage Log")),e.default.createElement("div",{style:{marginBottom:24,padding:16,background:"#f8fafc",borderRadius:8}},e.default.createElement("div",{style:{display:"flex",gap:16,flexWrap:"wrap",alignItems:"end"}},e.default.createElement("div",{style:{flex:"1 1 200px"}},e.default.createElement("label",{style:t.label},"Start Date"),e.default.createElement("input",{type:"date",style:t.input,value:we.start,onChange:o=>Tt({...we,start:o.target.value})})),e.default.createElement("div",{style:{flex:"1 1 200px"}},e.default.createElement("label",{style:t.label},"End Date"),e.default.createElement("input",{type:"date",style:t.input,value:we.end,onChange:o=>Tt({...we,end:o.target.value})})))),Ue==="pl"&&po(we),Ue==="mileage"&&yo(we)),po=o=>{let n=Q.filter(c=>{let f=c.date;return f>=o.start&&f<=o.end}),l=n.reduce((c,f)=>c+(f.rate||0),0),r=Fe.filter(c=>{let f=c.date;return f>=o.start&&f<=o.end}),d={};r.forEach(c=>{d[c.category]||(d[c.category]=0),d[c.category]+=c.amount||0});let m=xe.filter(c=>{let f=c.date;return f>=o.start&&f<=o.end}),s=m.reduce((c,f)=>c+(f.miles||0),0),u=m.reduce((c,f)=>c+(f.amount||0),0),b=Object.values(d).reduce((c,f)=>c+f,0)+u,p=l-b,S=l>0?(p/l*100).toFixed(1):0;return e.default.createElement("div",null,e.default.createElement("div",{style:{marginBottom:24,padding:16,background:"#f8fafc",borderRadius:8}},e.default.createElement("div",{style:{fontSize:14,color:"#64748b",marginBottom:4}},"Report Period"),e.default.createElement("div",{style:{fontSize:18,fontWeight:600}},new Date(o.start).toLocaleDateString()," - ",new Date(o.end).toLocaleDateString())),e.default.createElement("div",{style:{marginBottom:32}},e.default.createElement("h3",{style:{fontSize:18,fontWeight:600,marginBottom:16,borderBottom:"2px solid #e2e8f0",paddingBottom:8}},"Income"),e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0"}},e.default.createElement("span",{style:{color:"#64748b"}},"Coaching Revenue (",n.length," lessons)"),e.default.createElement("span",{style:{fontWeight:600}},H(l))),e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",borderTop:"1px solid #e2e8f0",fontWeight:700}},e.default.createElement("span",null,"Total Income"),e.default.createElement("span",null,H(l)))),e.default.createElement("div",{style:{marginBottom:32}},e.default.createElement("h3",{style:{fontSize:18,fontWeight:600,marginBottom:16,borderBottom:"2px solid #e2e8f0",paddingBottom:8}},"Expenses"),Object.entries(d).map(([c,f])=>e.default.createElement("div",{key:c,style:{display:"flex",justifyContent:"space-between",padding:"12px 0"}},e.default.createElement("span",{style:{color:"#64748b"}},c),e.default.createElement("span",null,H(f)))),u>0&&e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0"}},e.default.createElement("span",{style:{color:"#64748b"}},"Vehicle/Mileage \u{1F697} (",s.toFixed(1)," miles)"),e.default.createElement("span",null,H(u))),e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",padding:"12px 0",borderTop:"1px solid #e2e8f0",fontWeight:700}},e.default.createElement("span",null,"Total Expenses"),e.default.createElement("span",null,H(b)))),e.default.createElement("div",{style:{padding:20,background:p>=0?"#f0fdf4":"#fef2f2",borderRadius:8,border:`2px solid ${p>=0?"#22c55e":"#ef4444"}`}},e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:16}},e.default.createElement("div",null,e.default.createElement("div",{style:{fontSize:14,color:"#64748b",marginBottom:4}},"Net Profit"),e.default.createElement("div",{style:{fontSize:28,fontWeight:700,color:p>=0?"#22c55e":"#ef4444"}},H(p))),e.default.createElement("div",{style:{textAlign:"right"}},e.default.createElement("div",{style:{fontSize:14,color:"#64748b",marginBottom:4}},"Profit Margin"),e.default.createElement("div",{style:{fontSize:28,fontWeight:700}},S,"%")))))},yo=o=>{let n=xe.filter(d=>{let m=d.date;return m>=o.start&&m<=o.end}),l=n.reduce((d,m)=>d+(m.miles||0),0),r=n.reduce((d,m)=>d+(m.amount||0),0);return e.default.createElement("div",null,e.default.createElement("div",{style:{marginBottom:24,padding:16,background:"#f8fafc",borderRadius:8}},e.default.createElement("div",{style:{fontSize:14,color:"#64748b",marginBottom:4}},"Report Period"),e.default.createElement("div",{style:{fontSize:18,fontWeight:600}},new Date(o.start).toLocaleDateString()," - ",new Date(o.end).toLocaleDateString())),e.default.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:24}},e.default.createElement("div",{style:{padding:16,background:"#eff6ff",borderRadius:8,border:"1px solid #3b82f6"}},e.default.createElement("div",{style:{fontSize:14,color:"#3b82f6",marginBottom:4}},"Total Miles"),e.default.createElement("div",{style:{fontSize:24,fontWeight:700,color:"#1e40af"}},l.toFixed(1))),e.default.createElement("div",{style:{padding:16,background:"#f0fdf4",borderRadius:8,border:"1px solid #22c55e"}},e.default.createElement("div",{style:{fontSize:14,color:"#22c55e",marginBottom:4}},"Total Deduction"),e.default.createElement("div",{style:{fontSize:24,fontWeight:700,color:"#15803d"}},H(r))),e.default.createElement("div",{style:{padding:16,background:"#faf5ff",borderRadius:8,border:"1px solid #a855f7"}},e.default.createElement("div",{style:{fontSize:14,color:"#a855f7",marginBottom:4}},"Method"),e.default.createElement("div",{style:{fontSize:18,fontWeight:700,color:"#7e22ce"}},Y.vehicle_expense_method==="standard"?`${H(Y.mileage_rate)}/mi`:"Actual Costs"))),n.length===0?e.default.createElement("div",{style:t.empty},"No mileage entries for the selected date range."):e.default.createElement("div",{style:{overflowX:"auto"}},e.default.createElement("table",{style:t.table},e.default.createElement("thead",null,e.default.createElement("tr",null,e.default.createElement("th",{style:t.th},"Date"),e.default.createElement("th",{style:t.th},"Description"),e.default.createElement("th",{style:t.th},"Entry Type"),e.default.createElement("th",{style:t.th},"Miles"),e.default.createElement("th",{style:t.th},"Amount"))),e.default.createElement("tbody",null,n.map(d=>e.default.createElement("tr",{key:d.id},e.default.createElement("td",{style:t.td},ye(d.date)),e.default.createElement("td",{style:t.td},d.description),e.default.createElement("td",{style:t.td},d.entry_type==="odometer"?"\u{1F522} Odometer":"\u{1F4DD} Manual"),e.default.createElement("td",{style:t.td},(d.miles||0).toFixed(1)),e.default.createElement("td",{style:t.td},H(d.amount||0))))),e.default.createElement("tfoot",null,e.default.createElement("tr",{style:{background:"#f8fafc",fontWeight:700}},e.default.createElement("td",{style:t.td,colSpan:"3"},"Total"),e.default.createElement("td",{style:t.td},l.toFixed(1)),e.default.createElement("td",{style:t.td},H(r)))))))},mo=()=>e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Settings")),e.default.createElement("div",{style:{marginBottom:24}},e.default.createElement("h3",{style:{fontSize:16,fontWeight:600,marginBottom:16}},"\u{1F4B3} Payment Methods"),e.default.createElement("p",{style:{fontSize:14,color:"#64748b",marginBottom:16}},"Configure your accepted payment methods. These will be included on invoices."),e.default.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:16,marginBottom:16}},e.default.createElement("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},e.default.createElement("input",{type:"checkbox",checked:$.cash,onChange:o=>fe({...$,cash:o.target.checked}),style:{marginRight:8}}),"Accept Cash"),e.default.createElement("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},e.default.createElement("input",{type:"checkbox",checked:$.check,onChange:o=>fe({...$,check:o.target.checked}),style:{marginRight:8}}),"Accept Check")),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Venmo Username"),e.default.createElement("input",{type:"text",style:t.input,value:$.venmo,onChange:o=>fe({...$,venmo:o.target.value}),placeholder:"@username"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"PayPal Email"),e.default.createElement("input",{type:"text",style:t.input,value:$.paypal,onChange:o=>fe({...$,paypal:o.target.value}),placeholder:"email@example.com"}))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Zelle (phone or email)"),e.default.createElement("input",{type:"text",style:t.input,value:$.zelle,onChange:o=>fe({...$,zelle:o.target.value}),placeholder:"phone or email"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Cash App Tag"),e.default.createElement("input",{type:"text",style:t.input,value:$.cashapp,onChange:o=>fe({...$,cashapp:o.target.value}),placeholder:"$cashtag"}))),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Zn},"Save Payment Settings")),e.default.createElement("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:24,marginBottom:24}},e.default.createElement("h3",{style:{fontSize:16,fontWeight:600,marginBottom:16}},"\u{1F4CA} Expense Categories"),e.default.createElement("p",{style:{fontSize:14,color:"#64748b",marginBottom:16}},"Customize your expense categories for better tracking and reporting."),e.default.createElement("div",{style:{marginBottom:12}},Y.expense_categories.map((o,n)=>e.default.createElement("div",{key:n,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:12,background:"#f8fafc",borderRadius:6,marginBottom:8}},e.default.createElement("span",null,o),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnDanger},onClick:async()=>{if(Y.expense_categories.length<=1){y("Must have at least one category");return}let l=Y.expense_categories.filter((r,d)=>d!==n);Se({...Y,expense_categories:l}),await g.from("settings").update({expense_categories:JSON.stringify(l)}).eq("id",1),y("Category removed")}},"Remove")))),e.default.createElement("div",{style:{display:"flex",gap:8}},e.default.createElement("input",{type:"text",style:{...t.input,flex:1},placeholder:"New category name...",id:"newCategoryInput"}),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:async()=>{let o=document.getElementById("newCategoryInput"),n=o.value.trim();if(!n){y("Enter a category name");return}if(Y.expense_categories.includes(n)){y("Category already exists");return}let l=[...Y.expense_categories,n];Se({...Y,expense_categories:l}),await g.from("settings").update({expense_categories:JSON.stringify(l)}).eq("id",1),o.value="",y("Category added")}},"Add Category"))),e.default.createElement("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:24,marginBottom:24}},e.default.createElement("h3",{style:{fontSize:16,fontWeight:600,marginBottom:16}},"\u{1F697} Mileage & Vehicle Settings"),e.default.createElement("div",{style:{marginBottom:16}},e.default.createElement("label",{style:t.label},"Vehicle Expense Method"),e.default.createElement("select",{style:t.input,value:Y.vehicle_expense_method,onChange:async o=>{Se({...Y,vehicle_expense_method:o.target.value}),await g.from("settings").update({vehicle_expense_method:o.target.value}).eq("id",1),y("Settings saved")}},e.default.createElement("option",{value:"standard"},"Standard Mileage Rate"),e.default.createElement("option",{value:"actual"},"Actual Expenses")),e.default.createElement("div",{style:{fontSize:12,color:"#64748b",marginTop:4}},Y.vehicle_expense_method==="standard"?"Uses the IRS standard mileage rate to calculate deductions automatically.":"Tracks actual vehicle expenses (gas, maintenance, etc.).")),Y.vehicle_expense_method==="standard"&&e.default.createElement("div",null,e.default.createElement("label",{style:t.label},"Standard Mileage Rate (per mile)"),e.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},e.default.createElement("span",{style:{fontSize:18}},"$"),e.default.createElement("input",{type:"number",step:"0.01",style:{...t.input,maxWidth:150},value:Y.mileage_rate,onChange:async o=>{let n=parseFloat(o.target.value)||0;Se({...Y,mileage_rate:n}),await g.from("settings").update({mileage_rate:n}).eq("id",1),y("Mileage rate updated")}})),e.default.createElement("div",{style:{fontSize:12,color:"#64748b",marginTop:4}},"Current IRS standard mileage rate for 2025 is $0.70 per mile."))),e.default.createElement("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:24}},e.default.createElement("h3",{style:{fontSize:16,fontWeight:600,marginBottom:16}},"\u{1F4E7} Email Invoices"),e.default.createElement("p",{style:{fontSize:14,color:"#64748b"}},"To send invoices via email, you'll need to set up a Resend API key in your Supabase Edge Function. See the README for setup instructions."))),Gt=()=>{let o=Me.filter(r=>r.start_date>=M(new Date)),n=Me.filter(r=>r.start_date<M(new Date)),l=r=>V.filter(d=>d.event_id===r&&d.status!=="cancelled");return e.default.createElement("div",null,e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"Upcoming Events & Competitions"),F&&e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>je()},"+ Add Event")),o.length===0?e.default.createElement("div",{style:t.empty},"No upcoming events."):e.default.createElement("div",null,o.map(r=>{let d=Be(r.event_type),m=l(r.id),s=ie.find(p=>p.id===r.venue_id),u=G.map(p=>p.id),b=m.filter(p=>u.includes(p.student_id));return e.default.createElement("div",{key:r.id,style:{...t.listItem,flexDirection:"column",alignItems:"stretch"}},e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:12}},e.default.createElement("div",null,e.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:8}},e.default.createElement("span",{style:{fontSize:24}},d.icon),e.default.createElement("strong",{style:{fontSize:16}},r.name),e.default.createElement("span",{style:{...t.badge,background:d.color,color:"white"}},d.name)),e.default.createElement("div",{style:{color:"#64748b",fontSize:13,marginTop:4}},ye(r.start_date),r.end_date&&r.end_date!==r.start_date&&` - ${ye(r.end_date)}`,s&&` \u2022 ${s.name}`),r.notes&&e.default.createElement("div",{style:{marginTop:4,fontSize:13}},r.notes)),e.default.createElement("div",{style:{display:"flex",gap:8}},r.is_registrable&&G.length>0&&e.default.createElement("button",{style:{...t.btn,...t.btnSuccess},onClick:()=>Vn(r)},"Register Student"),F&&e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:()=>je(r)},"Edit"))),m.length>0&&e.default.createElement("div",{style:{marginTop:12,padding:12,background:"#f8fafc",borderRadius:8}},e.default.createElement("strong",{style:{fontSize:13}},"Registered (",m.length,"):"),e.default.createElement("div",{style:{marginTop:8}},m.map(p=>{let S=G.find(f=>f.id===p.student_id),c=u.includes(p.student_id);return e.default.createElement("div",{key:p.id,style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 0"}},e.default.createElement("span",null,S?.name||"Unknown"),(F||c)&&e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnDanger},onClick:()=>qn(p.id)},"Cancel"))}))))}))),n.length>0&&e.default.createElement("div",{style:t.card},e.default.createElement("h2",{style:t.cardTitle},"Past Events"),e.default.createElement("div",null,n.slice(0,10).map(r=>{let d=Be(r.event_type);return e.default.createElement("div",{key:r.id,style:t.listItem},e.default.createElement("div",null,e.default.createElement("span",{style:{marginRight:8}},d.icon),e.default.createElement("strong",null,r.name),e.default.createElement("span",{style:{color:"#64748b",marginLeft:8}},ye(r.start_date))))}))))},vo=()=>{let o=new Date;o.setHours(0,0,0,0);let n=M(o),l=G.map(p=>p.id),r=Pt(ae),d=p=>{let S=M(p);return Q.filter(c=>c.date===S&&c.is_published)},m=p=>V.find(S=>S.lesson_id===p&&l.includes(S.student_id)&&S.status!=="cancelled"),s=p=>{let S=new Date(`${p.date}T${p.start_time}`),c=new Date,f=(S-c)/(1e3*60*60),_=S<c,B=m(p.id),qe=V.filter(ze=>ze.lesson_id===p.id&&ze.status!=="cancelled").length>=p.max_students,lt=f<tn&&f>0;return _?{status:"past",color:"#9ca3af",myBooking:B}:B?{status:"booked",color:"#22c55e",myBooking:B,isLateWindow:lt}:qe?{status:"full",color:"#9ca3af",myBooking:B}:{status:"available",color:"#3b82f6",myBooking:B}},u=p=>{let S=d(p);if(S.length===0)return null;let c=!1,f=!1;for(let _ of S){let B=s(_);B.status==="booked"&&(c=!0),B.status==="available"&&(f=!0)}return c?"#22c55e":f?"#3b82f6":"#9ca3af"};if(G.length===0)return e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.empty},e.default.createElement("p",null,"Add a student first before booking lessons."),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>Ze("mystudents")},"Add Student")));let b=R?d(R):[];return e.default.createElement("div",null,e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:()=>{let p=new Date(ae);p.setMonth(p.getMonth()-1),Ge(p),We(null)}},"\u2190 Prev"),e.default.createElement("h2",{style:{margin:0,fontSize:18}},ae.toLocaleDateString("en-US",{month:"long",year:"numeric"})),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:()=>{let p=new Date(ae);p.setMonth(p.getMonth()+1),Ge(p),We(null)}},"Next \u2192")),e.default.createElement("div",{style:{display:"flex",gap:16,marginBottom:12,fontSize:12,flexWrap:"wrap"}},e.default.createElement("span",null,e.default.createElement("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:"#22c55e",marginRight:4}})," Your Booking"),e.default.createElement("span",null,e.default.createElement("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:"#3b82f6",marginRight:4}})," Available"),e.default.createElement("span",null,e.default.createElement("span",{style:{display:"inline-block",width:12,height:12,borderRadius:"50%",background:"#9ca3af",marginRight:4}})," Full/Past")),e.default.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:1,background:"#e2e8f0"}},mt.map(p=>e.default.createElement("div",{key:p,style:{background:"#f1f5f9",padding:8,textAlign:"center",fontWeight:600,fontSize:12}},p)),r.map(({date:p,outside:S},c)=>{let _=M(p)===n,B=R&&M(p)===M(R),O=u(p);return e.default.createElement("div",{key:c,onClick:()=>We(p),style:{background:B?"#ede9fe":_?"#fef3c7":"white",padding:8,minHeight:60,cursor:"pointer",opacity:S?.4:1,border:B?"2px solid #7c3aed":"1px solid transparent"}},e.default.createElement("div",{style:{fontWeight:_?700:400,fontSize:14}},p.getDate()),O&&e.default.createElement("div",{style:{marginTop:4}},e.default.createElement("span",{style:{display:"inline-block",width:8,height:8,borderRadius:"50%",background:O}})))}))),R&&e.default.createElement("div",{style:t.card},e.default.createElement("h3",{style:{margin:"0 0 16px 0"}},R.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})),b.length===0?e.default.createElement("div",{style:t.empty},"No lessons available on this day."):e.default.createElement("div",null,b.sort((p,S)=>p.start_time.localeCompare(S.start_time)).map(p=>{let S=ne(p.lesson_type),c=ie.find(O=>O.id===p.venue_id),f=s(p),_=V.filter(O=>O.lesson_id===p.id&&O.status!=="cancelled").length,B=p.max_students-_;return e.default.createElement("div",{key:p.id,style:{...t.listItem,borderLeft:`4px solid ${f.color}`,background:f.status==="booked"?"#f0fdf4":f.status==="available"?"#eff6ff":"#f9fafb"}},e.default.createElement("div",{style:{flex:1}},e.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"}},e.default.createElement("span",{style:{fontWeight:600}},Pe(p.start_time)," - ",Pe(p.end_time)),e.default.createElement("span",{style:{...t.badge,background:S.color,color:"white"}},S.icon," ",S.name)),e.default.createElement("div",{style:{color:"#64748b",fontSize:13,marginTop:4}},c?.name||"TBD",f.status==="booked"&&f.myBooking&&e.default.createElement("span",null," \u2022 Booked: ",G.find(O=>O.id===f.myBooking.student_id)?.name),f.status==="available"&&e.default.createElement("span",null," \u2022 ",B," spot",B!==1?"s":""," available"),f.status==="full"&&e.default.createElement("span",null," \u2022 Full"),f.status==="past"&&e.default.createElement("span",null," \u2022 Past"))),e.default.createElement("div",null,f.status==="available"&&e.default.createElement("button",{style:{...t.btn,...t.btnPrimary,...t.btnSmall},onClick:()=>He(p)},"Book"),f.status==="booked"&&e.default.createElement("button",{style:{...t.btn,...t.btnDanger,...t.btnSmall},onClick:()=>Hn(f.myBooking.id)},f.isLateWindow?"\u26A0\uFE0F Cancel (Late)":"Cancel")))}))),re&&e.default.createElement("div",{style:t.modalOverlay,onClick:()=>He(null)},e.default.createElement("div",{style:t.modal,onClick:p=>p.stopPropagation()},e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},"Book Lesson"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:()=>He(null)},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:{marginBottom:16,padding:12,background:"#f8fafc",borderRadius:8}},e.default.createElement("strong",null,ye(re.date)),e.default.createElement("br",null),Pe(re.start_time)," - ",Pe(re.end_time),e.default.createElement("br",null),ie.find(p=>p.id===re.venue_id)?.name||"TBD"),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Select Student"),e.default.createElement("div",{style:{display:"flex",flexDirection:"column",gap:8}},(()=>{let p=V.filter(_=>_.lesson_id===re.id&&_.status!=="cancelled"),S=p.map(_=>_.student_id),c=re.max_students-p.length,f=G.filter(_=>!S.includes(_.id));return c<=0?e.default.createElement("div",{style:{padding:12,background:"#fef3c7",borderRadius:8,color:"#92400e"}},"This lesson is now full. Please select a different time."):f.length===0?e.default.createElement("div",{style:{padding:12,background:"#f0fdf4",borderRadius:8,color:"#166534"}},"All your students are already booked for this lesson."):f.map(_=>e.default.createElement("button",{key:_.id,style:{...t.btn,...t.btnPrimary,textAlign:"left"},onClick:()=>{Un(re.id,_.id),He(null)}},_.name))})()),(()=>{let p=V.filter(c=>c.lesson_id===re.id&&c.status!=="cancelled"),S=re.max_students-p.length;return e.default.createElement("div",{style:{marginTop:8,fontSize:12,color:"#64748b"}},S," of ",re.max_students," spot",re.max_students!==1?"s":""," available")})())))))},go=()=>e.default.createElement("div",{style:t.card},e.default.createElement("div",{style:t.cardHeader},e.default.createElement("h2",{style:t.cardTitle},"My Students"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:()=>Le()},"+ Add Student")),oe.length===0&&e.default.createElement("div",{style:{marginBottom:16,padding:16,background:"#fef3c7",borderRadius:8}},e.default.createElement("strong",null,"First, add your contact info:"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary,marginLeft:12},onClick:()=>ot()},"Add My Info")),G.length===0?e.default.createElement("div",{style:t.empty},"No students added yet."):e.default.createElement("div",null,G.map(o=>e.default.createElement("div",{key:o.id,style:t.listItem},e.default.createElement("div",null,e.default.createElement("strong",null,o.name),e.default.createElement("div",{style:{color:"#64748b",fontSize:13,marginTop:4}},o.isi_level&&`ISI: ${o.isi_level}`,o.isi_level&&o.usfsa_level&&" \u2022 ",o.usfsa_level&&`USFSA: ${o.usfsa_level}`)),e.default.createElement("div",null,e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnSecondary,marginRight:8},onClick:()=>Le(o)},"Edit"),e.default.createElement("button",{style:{...t.btn,...t.btnSmall,...t.btnDanger},onClick:()=>Lt(o.id)},"Delete")))))),fo=()=>{if(!se)return null;let o=()=>{L(null),K(null)};return e.default.createElement("div",{style:t.modalOverlay,onClick:o},e.default.createElement("div",{style:t.modal,onClick:n=>n.stopPropagation()},se==="lesson"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},D?"Edit Lesson":"New Lesson"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Date"),e.default.createElement("input",{type:"date",style:t.input,value:W.date,onChange:n=>de({...W,date:n.target.value})})),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Start Time"),e.default.createElement("input",{type:"time",style:t.input,value:W.start_time,onChange:n=>de({...W,start_time:n.target.value})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"End Time"),e.default.createElement("input",{type:"time",style:t.input,value:W.end_time,onChange:n=>de({...W,end_time:n.target.value})}))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Lesson Type"),e.default.createElement("select",{style:t.select,value:W.lesson_type,onChange:n=>{if(n.target.value==="__add_new__")et(!0);else{let l=ne(n.target.value);de({...W,lesson_type:n.target.value,max_students:l.max,rate:l.rate})}}},Ke.map(n=>e.default.createElement("option",{key:n.id,value:n.id},n.icon," ",n.name)),Oe.map(n=>e.default.createElement("option",{key:n.id,value:n.id},n.icon," ",n.name)),F&&e.default.createElement("option",{value:"__add_new__"},"\u2795 Add New Type...")),gn&&e.default.createElement("div",{style:{marginTop:12,padding:12,background:"#f8fafc",borderRadius:6,border:"1px solid #e2e8f0"}},e.default.createElement("div",{style:{marginBottom:8,fontWeight:600,fontSize:14}},"Add Custom Lesson Type"),e.default.createElement("div",{style:{display:"grid",gap:8}},e.default.createElement("input",{type:"text",placeholder:"Name",style:{...t.input,fontSize:13,padding:"6px 10px"},value:le.name,onChange:n=>_e({...le,name:n.target.value})}),e.default.createElement("div",{style:{display:"grid",gridTemplateColumns:"60px 1fr",gap:8}},e.default.createElement("input",{type:"text",placeholder:"\u{1F4DA}",style:{...t.input,fontSize:13,padding:"6px 10px",textAlign:"center"},value:le.icon,onChange:n=>_e({...le,icon:n.target.value})}),e.default.createElement("input",{type:"color",style:{width:"100%",height:32,border:"1px solid #e2e8f0",borderRadius:4},value:le.color,onChange:n=>_e({...le,color:n.target.value})})),e.default.createElement("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8}},e.default.createElement("input",{type:"number",placeholder:"Max students",min:1,style:{...t.input,fontSize:13,padding:"6px 10px"},value:le.max,onChange:n=>_e({...le,max:parseInt(n.target.value)})}),e.default.createElement("input",{type:"number",placeholder:"Rate",step:"0.01",style:{...t.input,fontSize:13,padding:"6px 10px"},value:le.rate,onChange:n=>_e({...le,rate:parseFloat(n.target.value)})})),e.default.createElement("div",{style:{display:"flex",gap:6,marginTop:4}},e.default.createElement("button",{style:{...t.btn,...t.btnPrimary,flex:1,padding:"6px 12px",fontSize:13},onClick:xn},"Add Type"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary,flex:1,padding:"6px 12px",fontSize:13},onClick:()=>{et(!1),_e({name:"",icon:"\u{1F4DA}",color:"#3b82f6",max:1,rate:50})}},"Cancel"))))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Max Students"),e.default.createElement("input",{type:"number",style:t.input,min:1,value:W.max_students,onChange:n=>de({...W,max_students:parseInt(n.target.value)})}))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Venue"),e.default.createElement("select",{style:t.select,value:W.venue_id,onChange:n=>de({...W,venue_id:n.target.value})},e.default.createElement("option",{value:""},"Select venue..."),ie.map(n=>e.default.createElement("option",{key:n.id,value:n.id},n.name)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Rate ($)"),e.default.createElement("input",{type:"number",style:t.input,step:"0.01",value:W.rate,onChange:n=>de({...W,rate:parseFloat(n.target.value)})}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:{...t.label,display:"flex",alignItems:"center"}},e.default.createElement("input",{type:"checkbox",style:t.checkbox,checked:W.is_published,onChange:n=>de({...W,is_published:n.target.checked})}),"Published (visible for booking)")),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Notes"),e.default.createElement("textarea",{style:t.textarea,value:W.notes,onChange:n=>de({...W,notes:n.target.value})}))),e.default.createElement("div",{style:t.modalFooter},D&&e.default.createElement("button",{style:{...t.btn,...t.btnDanger,marginRight:"auto"},onClick:()=>Bn(D.id)},"Delete"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Pn},"Save"))),se==="event"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},D?"Edit Event":"New Event"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Event Name"),e.default.createElement("input",{type:"text",style:t.input,value:j.name,onChange:n=>ve({...j,name:n.target.value}),placeholder:"e.g., Winter Classic"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Event Type"),e.default.createElement("select",{style:t.select,value:j.event_type,onChange:n=>ve({...j,event_type:n.target.value})},vt.map(n=>e.default.createElement("option",{key:n.id,value:n.id},n.icon," ",n.name)))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Start Date"),e.default.createElement("input",{type:"date",style:t.input,value:j.start_date,onChange:n=>ve({...j,start_date:n.target.value})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"End Date"),e.default.createElement("input",{type:"date",style:t.input,value:j.end_date,onChange:n=>ve({...j,end_date:n.target.value})}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Venue"),e.default.createElement("select",{style:t.select,value:j.venue_id,onChange:n=>ve({...j,venue_id:n.target.value})},e.default.createElement("option",{value:""},"Select venue..."),ie.map(n=>e.default.createElement("option",{key:n.id,value:n.id},n.name)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:{...t.label,display:"flex",alignItems:"center"}},e.default.createElement("input",{type:"checkbox",style:t.checkbox,checked:j.is_registrable,onChange:n=>ve({...j,is_registrable:n.target.checked})}),"Allow student registration")),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Notes"),e.default.createElement("textarea",{style:t.textarea,value:j.notes,onChange:n=>ve({...j,notes:n.target.value})}))),e.default.createElement("div",{style:t.modalFooter},D&&e.default.createElement("button",{style:{...t.btn,...t.btnDanger,marginRight:"auto"},onClick:()=>Fn(D.id)},"Delete"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Mn},"Save"))),se==="client"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},D?"Edit Client":"New Client"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Name *"),e.default.createElement("input",{type:"text",style:t.input,value:A.name,onChange:n=>q({...A,name:n.target.value}),required:!0})),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Email"),e.default.createElement("input",{type:"email",style:t.input,value:A.email,onChange:n=>q({...A,email:n.target.value})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Phone"),e.default.createElement("input",{type:"tel",style:t.input,value:A.phone,onChange:n=>q({...A,phone:n.target.value})}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Address"),e.default.createElement("input",{type:"text",style:t.input,value:A.address,onChange:n=>q({...A,address:n.target.value})})),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"City"),e.default.createElement("input",{type:"text",style:t.input,value:A.city,onChange:n=>q({...A,city:n.target.value})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"State"),e.default.createElement("input",{type:"text",style:t.input,value:A.state,onChange:n=>q({...A,state:n.target.value})}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ZIP"),e.default.createElement("input",{type:"text",style:t.input,value:A.zip,onChange:n=>q({...A,zip:n.target.value})})),e.default.createElement("hr",{style:{margin:"16px 0",border:"none",borderTop:"1px solid #e2e8f0"}}),e.default.createElement("h4",{style:{marginBottom:12}},"Second Parent/Guardian (Optional)"),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Name"),e.default.createElement("input",{type:"text",style:t.input,value:A.parent2_name,onChange:n=>q({...A,parent2_name:n.target.value})})),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Email"),e.default.createElement("input",{type:"email",style:t.input,value:A.parent2_email,onChange:n=>q({...A,parent2_email:n.target.value})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Phone"),e.default.createElement("input",{type:"tel",style:t.input,value:A.parent2_phone,onChange:n=>q({...A,parent2_phone:n.target.value})}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Notes"),e.default.createElement("textarea",{style:t.textarea,value:A.notes,onChange:n=>q({...A,notes:n.target.value})})),!D&&e.default.createElement(e.default.Fragment,null,e.default.createElement("hr",{style:{margin:"16px 0",border:"none",borderTop:"1px solid #e2e8f0"}}),e.default.createElement("h4",{style:{marginBottom:8}},"Student Information (Optional)"),e.default.createElement("p",{style:{fontSize:13,color:"#64748b",marginBottom:12}},"Add child's name to auto-create student record. Leave blank if client is the student (adult)."),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Child/Student Name"),e.default.createElement("input",{type:"text",style:t.input,value:A.child_name,onChange:n=>q({...A,child_name:n.target.value}),placeholder:"Leave blank if client is the student"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Child Birthdate"),e.default.createElement("input",{type:"date",style:t.input,value:A.child_birthdate,onChange:n=>q({...A,child_birthdate:n.target.value})}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Child Email (for self-login)"),e.default.createElement("input",{type:"email",style:t.input,value:A.child_email,onChange:n=>q({...A,child_email:n.target.value})})))),e.default.createElement("div",{style:t.modalFooter},D&&F&&e.default.createElement("button",{style:{...t.btn,...t.btnDanger,marginRight:"auto"},onClick:()=>Wn(D.id)},"Delete"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Gn},"Save"))),se==="student"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},D?"Edit Student":"New Student"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Parent/Client *"),e.default.createElement("select",{style:t.select,value:C.client_id,onChange:n=>z({...C,client_id:n.target.value}),required:!0},e.default.createElement("option",{value:""},"Select parent..."),oe.map(n=>e.default.createElement("option",{key:n.id,value:n.id},n.name)))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Student Name ",F?"*":""),e.default.createElement("input",{type:"text",style:t.input,value:C.name,onChange:n=>z({...C,name:n.target.value}),placeholder:F?"":"Leave blank to add yourself"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Email"),e.default.createElement("input",{type:"email",style:t.input,value:C.email,onChange:n=>z({...C,email:n.target.value}),placeholder:F?"Optional":"Optional (uses yours if blank)"}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Birthdate"),e.default.createElement("input",{type:"date",style:t.input,value:C.birthdate,onChange:n=>z({...C,birthdate:n.target.value})})),e.default.createElement("hr",{style:{margin:"20px 0",border:"none",borderTop:"2px solid #3b82f6"}}),e.default.createElement("h3",{style:{marginBottom:16,color:"#1e40af"}},"ISI Skill Levels"),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Freestyle Level"),e.default.createElement("select",{style:t.select,value:C.isi_freestyle,onChange:n=>z({...C,isi_freestyle:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),qo.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Figures"),e.default.createElement("select",{style:t.select,value:C.isi_figures,onChange:n=>z({...C,isi_figures:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),Yo.map(n=>e.default.createElement("option",{key:n,value:n},n))))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Couples"),e.default.createElement("select",{style:t.select,value:C.isi_couples,onChange:n=>z({...C,isi_couples:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),Jo.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Pairs"),e.default.createElement("select",{style:t.select,value:C.isi_pairs,onChange:n=>z({...C,isi_pairs:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),Ko.map(n=>e.default.createElement("option",{key:n,value:n},n))))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Ice Dance"),e.default.createElement("select",{style:t.select,value:C.isi_icedance,onChange:n=>z({...C,isi_icedance:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),Xo.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI International Dance"),e.default.createElement("select",{style:t.select,value:C.isi_international_dance,onChange:n=>z({...C,isi_international_dance:n.target.value})},e.default.createElement("option",{value:""},"Select dance..."),nn.map(n=>e.default.createElement("option",{key:n,value:n},n))))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Free Dance Partnered"),e.default.createElement("select",{style:t.select,value:C.isi_freedance_partnered,onChange:n=>z({...C,isi_freedance_partnered:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),Zo.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Open Solo Free Dance"),e.default.createElement("select",{style:t.select,value:C.isi_solo_freedance,onChange:n=>z({...C,isi_solo_freedance:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),Qo.map(n=>e.default.createElement("option",{key:n,value:n},n))))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Synchro"),e.default.createElement("select",{style:t.select,value:C.isi_synchro,onChange:n=>z({...C,isi_synchro:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),Ro.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Special Skater"),e.default.createElement("select",{style:t.select,value:C.isi_special_skater,onChange:n=>z({...C,isi_special_skater:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),ei.map(n=>e.default.createElement("option",{key:n,value:n},n))))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"ISI Membership Number"),e.default.createElement("input",{type:"text",style:t.input,value:C.isi_number,onChange:n=>z({...C,isi_number:n.target.value})})),e.default.createElement("hr",{style:{margin:"20px 0",border:"none",borderTop:"2px solid #10b981"}}),e.default.createElement("h3",{style:{marginBottom:16,color:"#047857"}},"USFSA Test Levels"),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Skating Skills (Moves)"),e.default.createElement("select",{style:t.select,value:C.usfsa_skating_skills,onChange:n=>z({...C,usfsa_skating_skills:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),ti.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Singles (Free Skate)"),e.default.createElement("select",{style:t.select,value:C.usfsa_singles,onChange:n=>z({...C,usfsa_singles:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),ni.map(n=>e.default.createElement("option",{key:n,value:n},n))))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Pattern Dance"),e.default.createElement("select",{style:t.select,value:C.usfsa_pattern_dance,onChange:n=>z({...C,usfsa_pattern_dance:n.target.value})},e.default.createElement("option",{value:""},"Select dance..."),nn.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Free Dance"),e.default.createElement("select",{style:t.select,value:C.usfsa_free_dance,onChange:n=>z({...C,usfsa_free_dance:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),oi.map(n=>e.default.createElement("option",{key:n,value:n},n))))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Pairs"),e.default.createElement("select",{style:t.select,value:C.usfsa_pairs,onChange:n=>z({...C,usfsa_pairs:n.target.value})},e.default.createElement("option",{value:""},"Select level..."),ii.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"USFSA Membership Number"),e.default.createElement("input",{type:"text",style:t.input,value:C.usfsa_number,onChange:n=>z({...C,usfsa_number:n.target.value})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Notes"),e.default.createElement("textarea",{style:t.textarea,value:C.notes,onChange:n=>z({...C,notes:n.target.value})}))),e.default.createElement("div",{style:t.modalFooter},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:On},"Save"))),se==="venue"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},D?"Edit Venue":"New Venue"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Venue Name *"),e.default.createElement("input",{type:"text",style:t.input,value:be.name,onChange:n=>Ne({...be,name:n.target.value}),placeholder:"e.g., Winterland Ice Arena",required:!0})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Address"),e.default.createElement("input",{type:"text",style:t.input,value:be.address,onChange:n=>Ne({...be,address:n.target.value}),placeholder:"123 Ice Way, Skating City, ST 12345"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Color (for calendar dot)"),e.default.createElement("div",{style:{display:"flex",gap:8,alignItems:"center"}},e.default.createElement("input",{type:"color",style:{width:60,height:40,border:"1px solid #e2e8f0",borderRadius:4,cursor:"pointer"},value:be.color,onChange:n=>Ne({...be,color:n.target.value})}),e.default.createElement("span",{style:{fontSize:13,color:"#64748b"}},"A small dot in this color will appear on lessons at this venue")))),e.default.createElement("div",{style:t.modalFooter},D&&e.default.createElement("button",{style:{...t.btn,...t.btnDanger,marginRight:"auto"},onClick:()=>zt(D.id)},"Delete"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Yn},"Save"))),se==="expense"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},D?"Edit Expense":"New Expense"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Date *"),e.default.createElement("input",{type:"date",style:t.input,value:ee.date,onChange:n=>ge({...ee,date:n.target.value}),required:!0})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Amount *"),e.default.createElement("input",{type:"number",style:t.input,step:"0.01",value:ee.amount,onChange:n=>ge({...ee,amount:n.target.value}),required:!0}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Category"),e.default.createElement("select",{style:t.select,value:ee.category,onChange:n=>ge({...ee,category:n.target.value})},Y.expense_categories.map(n=>e.default.createElement("option",{key:n,value:n},n)))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Description"),e.default.createElement("input",{type:"text",style:t.input,value:ee.description,onChange:n=>ge({...ee,description:n.target.value})})),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Vendor"),e.default.createElement("input",{type:"text",style:t.input,value:ee.vendor,onChange:n=>ge({...ee,vendor:n.target.value})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Payment Method"),e.default.createElement("select",{style:t.select,value:ee.payment_method,onChange:n=>ge({...ee,payment_method:n.target.value})},jo.map(n=>e.default.createElement("option",{key:n,value:n},n)))))),e.default.createElement("div",{style:t.modalFooter},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Qn},"Save"))),se==="mileage"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},D?"Edit Mileage":"Log Mileage"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Entry Type"),e.default.createElement("div",{style:{display:"flex",gap:16}},e.default.createElement("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},e.default.createElement("input",{type:"radio",name:"entry_type",value:"manual",checked:w.entry_type==="manual",onChange:n=>pe({...w,entry_type:n.target.value,miles:"",odometer_start:"",odometer_end:""}),style:{marginRight:6}}),"Manual Entry"),e.default.createElement("label",{style:{display:"flex",alignItems:"center",cursor:"pointer"}},e.default.createElement("input",{type:"radio",name:"entry_type",value:"odometer",checked:w.entry_type==="odometer",onChange:n=>pe({...w,entry_type:n.target.value,miles:"",odometer_start:"",odometer_end:""}),style:{marginRight:6}}),"Odometer Reading"))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Date *"),e.default.createElement("input",{type:"date",style:t.input,value:w.date,onChange:n=>pe({...w,date:n.target.value}),required:!0})),w.entry_type==="manual"?e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Miles *"),e.default.createElement("input",{type:"number",style:t.input,step:"0.1",value:w.miles,onChange:n=>pe({...w,miles:n.target.value}),required:!0,placeholder:"e.g., 25.5"})):e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Start Odometer *"),e.default.createElement("input",{type:"number",style:t.input,step:"0.1",value:w.odometer_start,onChange:n=>pe({...w,odometer_start:n.target.value}),required:!0,placeholder:"e.g., 45230.5"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"End Odometer *"),e.default.createElement("input",{type:"number",style:t.input,step:"0.1",value:w.odometer_end,onChange:n=>pe({...w,odometer_end:n.target.value}),required:!0,placeholder:"e.g., 45256.0"}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Description"),e.default.createElement("input",{type:"text",style:t.input,value:w.description,onChange:n=>pe({...w,description:n.target.value}),placeholder:"e.g., Round trip to Winterland Arena"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"IRS Rate ($/mile)"),e.default.createElement("input",{type:"number",style:t.input,step:"0.01",value:w.rate,onChange:n=>pe({...w,rate:n.target.value})}),e.default.createElement("div",{style:{fontSize:12,color:"#64748b",marginTop:4}},"2025 IRS standard rate: $0.70/mile")),(()=>{let n=w.entry_type==="odometer"&&w.odometer_start&&w.odometer_end?parseFloat(w.odometer_end)-parseFloat(w.odometer_start):parseFloat(w.miles)||0;return n>0&&w.rate?e.default.createElement("div",{style:{padding:12,background:"#f8fafc",borderRadius:8,marginTop:8}},e.default.createElement("strong",null,"Miles:")," ",n.toFixed(1),e.default.createElement("br",null),e.default.createElement("strong",null,"Deduction:")," ",H(n*parseFloat(w.rate))):null})()),e.default.createElement("div",{style:t.modalFooter},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:eo},"Save"))),se==="invoice"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},"Create Invoice"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Client *"),e.default.createElement("select",{style:t.select,value:k.client_id,onChange:n=>{let{lessons:l,lateCancellations:r}=$t(n.target.value),d=l.reduce((s,u)=>s+(u.rate||ne(u.lesson_type).rate),0),m=r.reduce((s,u)=>s+(u.rate||ne(u.lesson_type).rate),0);ue({...k,client_id:n.target.value,lessons:l.map(s=>s.id),lateCancellations:r.map(s=>s.id),amount:d+m})}},e.default.createElement("option",{value:""},"Select client..."),oe.map(n=>e.default.createElement("option",{key:n.id,value:n.id},n.name)))),e.default.createElement("div",{style:{padding:12,background:"#f8fafc",borderRadius:8,marginBottom:16}},e.default.createElement("strong",null,"Completed Lessons:")," ",k.lessons.length,e.default.createElement("br",null),k.lateCancellations?.length>0&&e.default.createElement(e.default.Fragment,null,e.default.createElement("strong",{style:{color:"#ef4444"}},"Late Cancellations:")," ",k.lateCancellations.length,e.default.createElement("br",null)),e.default.createElement("strong",null,"Subtotal:")," ",H(k.amount)),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Tax Rate (%)"),e.default.createElement("input",{type:"number",style:t.input,step:"0.01",value:k.tax_rate,onChange:n=>ue({...k,tax_rate:parseFloat(n.target.value)||0})})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Due Date"),e.default.createElement("input",{type:"date",style:t.input,value:k.due_date,onChange:n=>ue({...k,due_date:n.target.value})}))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Accepted Payment Methods"),e.default.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:12,marginBottom:12}},e.default.createElement("label",{style:{display:"flex",alignItems:"center"}},e.default.createElement("input",{type:"checkbox",checked:k.payment_cash,onChange:n=>ue({...k,payment_cash:n.target.checked}),style:{marginRight:6}}),"Cash"),e.default.createElement("label",{style:{display:"flex",alignItems:"center"}},e.default.createElement("input",{type:"checkbox",checked:k.payment_check,onChange:n=>ue({...k,payment_check:n.target.checked}),style:{marginRight:6}}),"Check")),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Venmo"),e.default.createElement("input",{type:"text",style:t.input,value:k.payment_venmo,onChange:n=>ue({...k,payment_venmo:n.target.value}),placeholder:"@username"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"PayPal"),e.default.createElement("input",{type:"text",style:t.input,value:k.payment_paypal,onChange:n=>ue({...k,payment_paypal:n.target.value}),placeholder:"email@example.com"}))),e.default.createElement("div",{style:t.row},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Zelle"),e.default.createElement("input",{type:"text",style:t.input,value:k.payment_zelle,onChange:n=>ue({...k,payment_zelle:n.target.value}),placeholder:"phone or email"})),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Cash App"),e.default.createElement("input",{type:"text",style:t.input,value:k.payment_cashapp,onChange:n=>ue({...k,payment_cashapp:n.target.value}),placeholder:"$cashtag"})))),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Notes"),e.default.createElement("textarea",{style:t.textarea,value:k.notes,onChange:n=>ue({...k,notes:n.target.value})})),e.default.createElement("div",{style:{padding:12,background:"#dcfce7",borderRadius:8}},e.default.createElement("strong",null,"Total:")," ",H(k.amount*(1+k.tax_rate/100)))),e.default.createElement("div",{style:t.modalFooter},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Kn,disabled:!k.client_id},"Create Invoice"))),se==="copyDay"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},"Copy Day"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("p",{style:{marginBottom:16}},"Copy all lessons from ",e.default.createElement("strong",null,Ce?.toLocaleDateString())," to:"),e.default.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:8}},Ve(Ce||ae).map((n,l)=>{let r=Ce&&n.toDateString()===Ce.toDateString(),d=ce.includes(l);return e.default.createElement("button",{key:l,style:{...t.btn,...d?t.btnPrimary:t.btnSecondary,opacity:r?.5:1},disabled:r,onClick:()=>{tt(d?ce.filter(m=>m!==l):[...ce,l])}},mt[l],e.default.createElement("br",null),e.default.createElement("span",{style:{fontSize:12}},n.getDate()))})),e.default.createElement("p",{style:{marginTop:16,fontSize:13,color:"#64748b"}},"Copied lessons will be unpublished (drafts). Conflicts will be skipped.")),e.default.createElement("div",{style:t.modalFooter},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:Nn,disabled:ce.length===0},"Copy to ",ce.length," Day",ce.length!==1?"s":""))),se==="copyWeek"&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},"Copy Week"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("p",{style:{marginBottom:16}},"Copy this week's schedule to future weeks:"),e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Number of weeks to copy ahead"),e.default.createElement("select",{style:t.select,value:Ae,onChange:n=>Dt(parseInt(n.target.value))},[1,2,3,4,5,6,7,8,9,10,11,12].map(n=>e.default.createElement("option",{key:n,value:n},n," week",n!==1?"s":"")))),e.default.createElement("p",{style:{fontSize:13,color:"#64748b"}},"Copied lessons will be unpublished (drafts). Conflicts will be skipped.")),e.default.createElement("div",{style:t.modalFooter},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnPrimary},onClick:$n},"Copy to ",Ae," Week",Ae!==1?"s":""))),se==="registerCompetition"&&te&&e.default.createElement(e.default.Fragment,null,e.default.createElement("div",{style:t.modalHeader},e.default.createElement("h3",{style:t.modalTitle},"Register for ",te.name),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"\u2715")),e.default.createElement("div",{style:t.modalBody},e.default.createElement("div",{style:t.formGroup},e.default.createElement("label",{style:t.label},"Select Student"),e.default.createElement("select",{style:t.select,value:ke,onChange:n=>It(n.target.value)},e.default.createElement("option",{value:""},"Choose a student..."),G.map(n=>{let l=V.some(r=>r.event_id===te.id&&r.student_id===n.id&&r.status!=="cancelled");return e.default.createElement("option",{key:n.id,value:n.id,disabled:l},n.name," ",l?"(already registered)":"")}))),e.default.createElement("div",{style:{padding:12,background:"#f8fafc",borderRadius:8}},e.default.createElement("strong",null,"Event:")," ",te.name,e.default.createElement("br",null),e.default.createElement("strong",null,"Date:")," ",ye(te.start_date),te.end_date&&te.end_date!==te.start_date&&` - ${ye(te.end_date)}`)),e.default.createElement("div",{style:t.modalFooter},e.default.createElement("button",{style:{...t.btn,...t.btnSecondary},onClick:o},"Cancel"),e.default.createElement("button",{style:{...t.btn,...t.btnSuccess},onClick:jn,disabled:!ke},"Register")))))},co=F?[{id:"calendar",label:"\u{1F4C5} Calendar"},{id:"clients",label:"\u{1F465} Clients"},{id:"students",label:"\u26F8\uFE0F Students"},{id:"events",label:"\u{1F3C6} Events"},{id:"venues",label:"\u{1F3DF}\uFE0F Venues"},{id:"invoices",label:"\u{1F4B5} Invoices"},{id:"expenses",label:"\u{1F4CA} Expenses"},{id:"mileage",label:"\u{1F697} Mileage"},{id:"reports",label:"\u{1F4C8} Reports"},{id:"settings",label:"\u2699\uFE0F Settings"}]:[{id:"booking",label:"\u{1F4C5} Book Lessons"},{id:"mystudents",label:"\u26F8\uFE0F My Students"},{id:"events",label:"\u{1F3C6} Events"}];return e.default.createElement("div",{style:t.container},e.default.createElement("header",{style:t.header},e.default.createElement("div",{style:t.headerContent},e.default.createElement("div",{style:t.logo},"\u26F8\uFE0F IceBooks Pro"),e.default.createElement("div",{style:t.userInfo},e.default.createElement("span",null,v?.name),e.default.createElement("span",{style:{...t.badge,...t.badgeInfo}},F?"Coach":"Client"),e.default.createElement("button",{style:{...t.btn,...t.btnSecondary,...t.btnSmall},onClick:_n},"Sign Out")))),e.default.createElement("main",{style:t.main},e.default.createElement("nav",{style:t.nav},co.map(o=>e.default.createElement("button",{key:o.id,style:{...t.navBtn,...Z===o.id?t.navBtnActive:{}},onClick:()=>Ze(o.id)},o.label))),F?e.default.createElement(e.default.Fragment,null,Z==="calendar"&&no(),Z==="clients"&&oo(),Z==="students"&&io(),Z==="events"&&Gt(),Z==="venues"&&lo(),Z==="invoices"&&so(),Z==="expenses"&&ro(),Z==="mileage"&&ao(),Z==="reports"&&uo(),Z==="settings"&&mo()):e.default.createElement(e.default.Fragment,null,Z==="booking"&&vo(),Z==="mystudents"&&go(),Z==="events"&&Gt())),fo(),ht&&e.default.createElement("div",{style:t.toast},ht),e.default.createElement("style",null,`
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        * { box-sizing: border-box; }
        body { margin: 0; }
        button:hover { opacity: 0.9; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #7c3aed; }
      `))}export{li as default};
/*! Bundled license information:

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
